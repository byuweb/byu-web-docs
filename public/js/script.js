var animate=function(){var n,a,l=(a=(n=[0,6e-5,24e-5,54e-5,97e-5,.00153,.00221,.00303,.00398,.00506,.00629,.00765,.00916,.01081,.0126,.01455,.01664,.01889,.0213,.02386,.02658,.02946,.0325,.03571,.03908,.04262,.04632,.05019,.05423,.05844,.06283,.06738,.0721,.07699,.08206,.0873,.0927,.09827,.104,.1099,.11597,.12219,.12857,.1351,.14179,.14861,.15559,.16271,.16995,.17734,.18484,.19247,.20021,.20805,.216,.22405,.23219,.24041,.24871,.25708,.26552,.27401,.28256,.29114,.29978,.30844,.31712,.32583,.33455,.34328,.352,.36073,.36945,.37815,.38682,.39548,.40411,.41269,.42126,.42977,.43824,.44666,.45502,.46334,.4716,.4798,.48793,.496,.50399,.51192,.51978,.52757,.53528,.54293,.55049,.55796,.56538,.5727,.57996,.58713,.59421,.60122,.60815,.615,.62175,.62844,.63504,.64157,.648,.65437,.66064,.66684,.67296,.679,.68496,.69084,.69665,.70238,.70803,.7136,.71911,.72452,.72988,.73515,.74036,.74549,.75054,.75554,.76045,.7653,.77007,.77479,.77942,.784,.78851,.79295,.79733,.80163,.80589,.81007,.81419,.81825,.82225,.82619,.83007,.83388,.83765,.84135,.845,.84858,.85211,.85559,.85902,.86239,.8657,.86895,.87217,.87532,.87842,.88149,.88448,.88743,.89034,.89319,.896,.89876,.90147,.90414,.90675,.90933,.91185,.91434,.91678,.91917,.92152,.92383,.92609,.92831,.93049,.93264,.93473,.9368,.93881,.94079,.94273,.94463,.9465,.94832,.95011,.95186,.95357,.95525,.95689,.95849,.96006,.9616,.96309,.96455,.96599,.96738,.96874,.97007,.97136,.97263,.97386,.97506,.97623,.97736,.97847,.97954,.98058,.98159,.98258,.98353,.98445,.98535,.98621,.98705,.98786,.98864,.98939,.99011,.99081,.99147,.99212,.99273,.99332,.99388,.99442,.99493,.99541,.99587,.9963,.99671,.99709,.99745,.99779,.9981,.99838,.99865,.99888,.9991,.99929,.99946,.9996,.99972,.99982,.9999,.99996,.99999,1]).length-1,function(e){var t=Math.round(e*a);return n[t]}),u="animating";return{animateHeight:function(t,e){var a,s,i,r,n=Object.assign({start:0,end:100,fadeIn:!0,duration:200,units:"px"},e),o=l;t.style.height=n.start+n.units,addClass(t,u),t.animation=(a={duration:n.duration,delta:o,step:function(e){t.style.height=n.start+(n.end-n.start)*e+n.units},finish:function(){removeClass(t,u),t.style.removeProperty("height"),"function"==typeof n.finish&&n.finish()},interrupt:function(){removeClass(t,u),t.style.removeProperty("height"),"function"==typeof n.interrupt&&n.interrupt()}},s=new Date,i=!1,r=function(){var e=new Date-s,t=e/a.duration;1<t&&(t=1);var n=a.delta(t);a.step(n),i&&a.interrupt?a.interrupt():t<1?window.requestAnimationFrame(r):a.finish&&a.finish()},window.requestAnimationFrame(r),{stop:function(){i=!0}})},getNaturalHeight:function(e){var t,n;return n=(t=function(e,t){var n=document.createElement(t);for(e.appendChild(n);e.firstChild&&e.firstChild!==n;)n.appendChild(e.firstChild);return n}(e,"div")).offsetHeight,function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}(t),n}}}(),byu_main=function(){var t=document;function s(e,t){return 0<t.getElementsByClassName(e).length}return HTMLElement.prototype.hasClass=function(e){return this.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},HTMLElement.prototype.addClass=function(e){for(var t=e.split(","),n=0;n<t.length;n++)-1==(" "+this.className+" ").indexOf(" "+t[n]+" ")&&(this.className+=" "+t[n]);return this},HTMLElement.prototype.removeClass=function(e){if(this.hasClass(e)){var t=new RegExp("(\\s|^)"+e+"(\\s|$)"),n=new RegExp("(\\s|^)"+e);this.className.search(t)&&(this.className=this.className.replace(n,""))}return this},{executeOnLoad:function(e){"loading"!=t.readyState?e():t.addEventListener?t.addEventListener("DOMContentLoaded",e):t.attachEvent("onreadystatechange",function(){"complete"==t.readyState&&e()})},elExists:s,hasChildren:function(e,t){var n,a=!1;return s(e,t)&&(n=t.getElementsByClassName(e),Array.prototype.forEach.call(n,function(e){0<e.children.length&&(a=!0)})),a}}}(),byu_header=function(){"use strict";var t=document,n="js-enabled",r="aria-expanded",o="menu-open";byu_main.executeOnLoad(function(){var e=t.getElementsByClassName("byu-header");Array.prototype.forEach.call(e,function(e){var t,i;t=e,(byu_main.elExists("byu-site-navigation",t)||byu_main.hasChildren("byu-action-id-search",t))&&(t.addClass(n),(i=t).getElementsByClassName("byu-menu-button")[0].addEventListener("click",function(e){var t,n,a,s;t=e.target,n=i,"false"!=t.getAttribute(r)?(a=n,t.setAttribute(r,!1),a.removeClass(o)):(s=n,t.setAttribute(r,!0),s.hasClass(o)||s.addClass(o))}))})})}(),byu_table=function(){"use strict";var a=document;function s(e){var t=e.offsetWidth,n=e.getElementsByTagName("table")[0],a=n.offsetWidth,s="table-wide",i="start-visible",r="end-visible";t<a?(e.hasClass(s)||e.addClass(s),0==n.scrollLeft?e.hasClass(i)||e.addClass(i):e.removeClass(i),a-n.scrollLeft==t?e.hasClass(r)||e.addClass(r):e.removeClass(r)):e.removeClass(s)}byu_main.executeOnLoad(function(){for(var e=a.getElementsByClassName("table-container"),t=0;t<e.length;t++){var n=e[t];s(n)}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGUuanMiLCJtYWluLmpzIiwiaGVhZGVyL2hlYWRlci5qcyIsIjAtZm91bmRhdGlvbi90YWJsZS90YWJsZS5qcyJdLCJuYW1lcyI6WyJhbmltYXRlIiwieUNvb3JkaW5hdGVzIiwibGVuIiwiZWFzZUZ1bmN0aW9uIiwibGVuZ3RoIiwicHJvZ3Jlc3MiLCJwIiwiTWF0aCIsInJvdW5kIiwiYW5pbWF0aW5nQ2xhc3MiLCJhbmltYXRlSGVpZ2h0IiwiZWwiLCJzZXR0aW5nc09iaiIsIm9wdHMiLCJzdGFydCIsImludGVycnVwdCIsInJlbmRlciIsInMiLCJPYmplY3QiLCJhc3NpZ24iLCJlbmQiLCJmYWRlSW4iLCJkdXJhdGlvbiIsInVuaXRzIiwiZWFzZSIsInN0eWxlIiwiaGVpZ2h0IiwiYWRkQ2xhc3MiLCJhbmltYXRpb24iLCJkZWx0YSIsInN0ZXAiLCJmaW5pc2giLCJyZW1vdmVDbGFzcyIsInJlbW92ZVByb3BlcnR5IiwiRGF0ZSIsInRpbWVQYXNzZWQiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzdG9wIiwiZ2V0TmF0dXJhbEhlaWdodCIsIndyYXBwZXIiLCJ3cmFwIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwid3JhcElubmVyIiwib2Zmc2V0SGVpZ2h0IiwicGFyZW50IiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsInJlbW92ZUNoaWxkIiwidW53cmFwIiwiYnl1X21haW4iLCJkb2MiLCJlbEV4aXN0cyIsImNsYXNzTmFtZSIsImNvbnRhaW5lciIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJIVE1MRWxlbWVudCIsInByb3RvdHlwZSIsImhhc0NsYXNzIiwibmFtZSIsInRoaXMiLCJtYXRjaCIsIlJlZ0V4cCIsIm5ld19jbGFzcyIsIm5jIiwic3BsaXQiLCJpIiwiaW5kZXhPZiIsInNlYXJjaCIsInJlcGxhY2UiLCJleGVjdXRlT25Mb2FkIiwiZnVuY3Rpb25OYW1lIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImhhc0NoaWxkcmVuIiwiZWxzIiwiQXJyYXkiLCJmb3JFYWNoIiwiY2FsbCIsImNoaWxkcmVuIiwiYnl1X2hlYWRlciIsImpzSW5pdENsYXNzIiwiZXhwYW5kZWRBdHRyIiwibWVudU9wZW5DbGFzcyIsImhlYWRlckVscyIsImhlYWRlckVsIiwiZSIsImJ0biIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImJ5dV90YWJsZSIsInVwZGF0ZVRhYmxlIiwiY193aWR0aCIsIm9mZnNldFdpZHRoIiwidGFibGUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRfd2lkdGgiLCJ0YWJsZV93aWRlX2NsYXNzIiwic3RhcnRfdmlzaWJsZV9jbGFzcyIsImVuZF92aXNpYmxlX2NsYXNzIiwic2Nyb2xsTGVmdCIsImNvbnRhaW5lcnMiXSwibWFwcGluZ3MiOiJBQUdBLElBQUFBLFFBQUEsV0FFQSxJQTRIQUMsRUFDQUMsRUE3SEFDLEdBNkhBRCxHQURBRCxFQUFBLENBQUEsRUFBQSxLQUFBLE1BQUEsTUFBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE1BQUEsTUFBQSxPQUFBLEtBQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsS0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxNQUFBLE9BQUEsS0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsS0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxJQUNBRyxPQUFBLEVBR0EsU0FBQUMsR0FDQSxJQUFBQyxFQUFBQyxLQUFBQyxNQUFBSCxFQUFB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LEVBQUE5RCxTQUFBNEQsV0EzR0EsR0NLQVEsVUFBQSxXQUVBLGFBRUEsSUFBQXpDLEVBQUFaLFNBNEJBLFNBQUFzRCxFQUFBdkMsR0FDQSxJQUFBd0MsRUFBQXhDLEVBQUF5QyxZQUNBQyxFQUFBMUMsRUFBQTJDLHFCQUFBLFNBQUEsR0FDQUMsRUFBQUYsRUFBQUQsWUFDQUksRUFBQSxhQUNBQyxFQUFBLGdCQUNBQyxFQUFBLGNBRUFQLEVBQUFJLEdBR0E1QyxFQUFBSSxTQUFBeUMsSUFDQTdDLEVBQUE5QixTQUFBMkUsR0FJQSxHQUFBSCxFQUFBTSxXQUNBaEQsRUFBQUksU0FBQTBDLElBQ0E5QyxFQUFBOUIsU0FBQTRFLEdBR0E5QyxFQUFBekIsWUFBQXVFLEdBSUFGLEVBQUFGLEVBQUFNLFlBQUFSLEVBQ0F4QyxFQUFBSSxTQUFBMkMsSUFDQS9DLEVBQUE5QixTQUFBNkUsR0FHQS9DLEVBQUF6QixZQUFBd0UsSUFNQS9DLEVBQUF6QixZQUFBc0UsR0E1REFqRCxTQUFBb0IsY0FTQSxXQUdBLElBRkEsSUFBQWlDLEVBQUFwRCxFQUFBSSx1QkFBQSxtQkFFQVcsRUFBQSxFQUFBQSxFQUFBcUMsRUFBQXRHLE9BQUFpRSxJQUFBLENBQ0EsSUFBQVosRUFBQWlELEVBQUFyQyxHQUNBMkIsRUFBQXZDLE1BdEJBIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKiovXG4vKiEgQW5pbWF0ZSAqL1xuXG52YXIgYW5pbWF0ZSA9IChmdW5jdGlvbigpIHtcblxuICAgIHZhciBlYXNlRnVuY3Rpb24gPSBjdWJpY0JlemllckRlZmluZWQoKTtcbiAgICB2YXIgYW5pbWF0aW5nQ2xhc3MgPSAnYW5pbWF0aW5nJztcblxuICAgIC8vIEFuaW1hdGlvblxuXG4gICAgLypcbiAgICAgKiBGdW5jOiBhbmltYXRlSGVpZ2h0XG4gICAgICogRGVzYzogQW5pbWF0ZSB0aGUgaGVpZ2h0IG9mIGFuIGl0ZW1cbiAgICAgKiBBcmdzOiBAZWwgLSBIVE1MIEVsZW1lbnQgLSBUaGUgSFRNTCBlbGVtZW50IHRvIGFuaW1hdGVcbiAgICAgKiAgICAgICBAc2V0dGluZ3NPYmogLSBPYmplY3QgLSBDb250YWlucyBwcm9wZXJ0aWVzIHRvIG92ZXJyaWRlIGRlZmF1bHQgc2V0dGluZ3NcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhbmltYXRlSGVpZ2h0KGVsLCBzZXR0aW5nc09iaikge1xuXG4gICAgICAgIC8vIFNldCBkZWZhdWx0cyBhbmQgb3ZlcndyaXRlIHdpdGggcGFzc2VkIG9iamVjdCAoc2V0dGluZ3NPYmopXG4gICAgICAgIHZhciBzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBzdGFydDogMCxcbiAgICAgICAgICAgIGVuZDogMTAwLFxuICAgICAgICAgICAgZmFkZUluOiB0cnVlLFxuICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgIHVuaXRzOiBcInB4XCIsXG4gICAgICAgIH0sIHNldHRpbmdzT2JqKTtcblxuICAgICAgICB2YXIgZWFzZSA9IGVhc2VGdW5jdGlvbjtcblxuICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBzLnN0YXJ0ICsgcy51bml0cztcbiAgICAgICAgYWRkQ2xhc3MoZWwsIGFuaW1hdGluZ0NsYXNzKTtcblxuICAgICAgICAvLyBBbmltYXRlIGhlaWdodCBhdCBpbnB1dCByYXRlXG4gICAgICAgIGVsLmFuaW1hdGlvbiA9IGFuaW1hdGUoe1xuICAgICAgICAgICAgZHVyYXRpb246IHMuZHVyYXRpb24sXG4gICAgICAgICAgICBkZWx0YTogZWFzZSxcbiAgICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcy5zdGFydCArICgocy5lbmQgLSBzLnN0YXJ0KSAqIGRlbHRhKSArIHMudW5pdHM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmluaXNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhlbCwgYW5pbWF0aW5nQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiaGVpZ2h0XCIpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygcy5maW5pc2ggPT0gXCJmdW5jdGlvblwiKSB7IHMuZmluaXNoKCk7IH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbnRlcnJ1cHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGVsLCBhbmltYXRpbmdDbGFzcyk7XG4gICAgICAgICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJoZWlnaHRcIik7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzLmludGVycnVwdCA9PSBcImZ1bmN0aW9uXCIpIHsgcy5pbnRlcnJ1cHQoKTsgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0gLy8gYW5pbWF0ZUhlaWdodFxuXG5cbiAgICAvKlxuICAgICAqIEZ1bmM6IGFuaW1hdGVcbiAgICAgKiBEZXNjOiBBbmltYXRlIGZ1bmN0aW9uXG4gICAgICogU3JjOiAgaHR0cDovL2phdmFzY3JpcHQuaW5mby90dXRvcmlhbC9hbmltYXRpb24gKG1haW4gYW5pbWF0aW9uIGZ1bmN0aW9ucylcbiAgICAgKiAgICAgICBodHRwOi8vY3JlYXRpdmVqcy5jb20vcmVzb3VyY2VzL3JlcXVlc3RhbmltYXRpb25mcmFtZS8gKHJlcXVlc3RBbmltYXRpb25GcmFtZSlcbiAgICAgKiBBcmdzOiBAb3B0cyAtIE9iamVjdCAtIFRoZSBvcHRpb25zIG9iamVjdFxuICAgICAqICAgICAgICAgY29udGFpbnM6IEBkdXJhdGlvbiAtIE51bWJlciAtIE1pbGxpc2Vjb25kcyBmb3IgdG90YWwgYW5pbWF0aW9uXG4gICAgICogICAgICAgICAgICAgICAgICAgQGRlbHRhIC0gRnVuY3Rpb24gLSBFYXNpbmcgZnVuY3Rpb25cbiAgICAgKiAgICAgICAgICAgICAgICAgICBAc3RlcCAtIEZ1bmN0aW9uIC0gUmVzdWx0IGZ1bmN0aW9uICh3aGF0IHNob3VsZCBoYXBwZW4gb24gc2NyZWVuIGVhY2ggZnJhbWUpXG4gICAgICogICAgICAgICAgICAgICAgICAgQGZpbmlzaCAtIEZ1bmN0aW9uIC0gb3B0aW9uYWwtIEVuZCBmdW5jdGlvbiAod2hhdCBoYXBwZW5zIHdoZW4gYW5pbWF0aW9uIGZpbmlzaGVzKVxuICAgICAqICAgICAgICAgICAgICAgICAgIEBpbnRlcnJ1cHQgLSBGdW5jdGlvbiAtIG9wdGlvbmFsLSBFbmQgZnVuY3Rpb24gKHdoYXQgaGFwcGVucyBpZiBhbmltYXRpb24gaXMgaW50ZXJydXB0ZWQpXG4gICAgICovXG4gICAgZnVuY3Rpb24gYW5pbWF0ZShvcHRzKSB7XG5cbiAgICAgICAgdmFyIHN0YXJ0ID0gbmV3IERhdGUoKTsgLy8gR2V0IHRoZSBzdGFydCB0aW1lXG4gICAgICAgIHZhciBpbnRlcnJ1cHQgPSBmYWxzZTsgLy8gSWYgdGhpcyBpcyB0cnVlLCBhbmltYXRpb24gd2lsbCBzdG9wXG4gICAgICAgIHZhciBzdG9wID0gZnVuY3Rpb24oKSB7IGludGVycnVwdCA9IHRydWU7IH07IC8vIFN0b3BzIHRoaXMgYW5pbWF0aW9uXG5cbiAgICAgICAgLy8gVGhlIHJlbmRlciBmdW5jdGlvblxuICAgICAgICB2YXIgcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdGltZVBhc3NlZCA9IG5ldyBEYXRlKCkgLSBzdGFydDsgLy8gVGhlIGFtb3VudCBvZiB0aW1lIGVsYXBzZWQgc2luY2Ugc3RhcnRcbiAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IHRpbWVQYXNzZWQgLyBvcHRzLmR1cmF0aW9uOyAvLyBQZXJjZW50YWdlIG9mIHRpbWUgcGFzc2VkIGluIGZ1bGwgZXhwZWN0ZWQgZHVyYXRpb25cblxuICAgICAgICAgICAgaWYgKHByb2dyZXNzID4gMSkgeyBwcm9ncmVzcyA9IDE7IH0gLy8gQ2FwIHBlcmNlbnRhZ2UgYXQgMSAoMTAwJSlcblxuICAgICAgICAgICAgdmFyIGRlbHRhID0gb3B0cy5kZWx0YShwcm9ncmVzcyk7IC8vIEFwcGx5IGVhc2luZyBmdW5jdGlvblxuICAgICAgICAgICAgb3B0cy5zdGVwKGRlbHRhKTsgLy8gQXBwbHkgdGhlIHN0ZXAgZnVjdGlvbiBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCAocmVuZGVycyBhIGNoYW5nZSBvbiBzY3JlZW4pXG5cbiAgICAgICAgICAgIC8vIEludGVycnVwdCwgY29udGludWUsIG9yIGZpbmlzaCBkZXBlbmRpbmcgb24gcHJvZ3Jlc3NcbiAgICAgICAgICAgIGlmIChpbnRlcnJ1cHQgJiYgb3B0cy5pbnRlcnJ1cHQpIHtcbiAgICAgICAgICAgICAgICBvcHRzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9ncmVzcyA8IDEpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdHMuZmluaXNoKSB7XG4gICAgICAgICAgICAgICAgb3B0cy5maW5pc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTdGFydCB0aGUgYW5pbWF0aW9uXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcblxuICAgICAgICByZXR1cm4geyBzdG9wOiBzdG9wIH07XG5cbiAgICB9IC8vIGFuaW1hdGVcblxuXG4gICAgLypcbiAgICAgKiBGdW5jOiBlYXNlSW5PdXRcbiAgICAgKiBEZXNjOiBFYXNpbmcgZnVuY3Rpb25cbiAgICAgKiBBcmdzOiBAcG93ZXIgLSBQb3NpdGl2ZSBJbnRlZ2VyIC0gTWF0aCBwb3dlciB0aGF0IHNwZWNpZmllcyBlYXNpbmcgY3VydmUgKGRlZmF1bHQgMylcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlYXNlSW5PdXQocG93ZXIpIHtcbiAgICAgICAgcG93ZXIgPSBwb3dlciA/IHBvd2VyIDogMztcbiAgICAgICAgdmFyIGRlbHRhID0gZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdyhwcm9ncmVzcywgcG93ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPCAuNSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVsdGEoMiAqIHByb2dyZXNzKSAvIDJcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gKDIgLSBkZWx0YSgyICogKDEgLSBwcm9ncmVzcykpKSAvIDJcbiAgICAgICAgfVxuICAgIH0gLy8gZWFzZUluT3V0XG5cblxuICAgIC8qXG4gICAgICogRnVuYzogY3ViaWNCZXppZXJEZWZpbmVkXG4gICAgICogRGVzYzogRWFzaW5nIGZ1bmN0aW9uIGJhc2VkIG9uIENTUyBlYXNpbmc6IGN1YmljLWJlemllcigwLjMsIDAsIDAuMywgMSkuXG4gICAgICogICAgICAgeUNvb3JkaW5hdGVzIGdlbmVyYXRlZCBieSBydW5uaW5nIGEgY3ViaWMgYmV6aWVyIGZ1bmN0aW9uIChyZXR1cm5pbmcgWCBhbmQgWSBjb29yZGluYXRlcyBiYXNlZCBvbiB0aW1lKVxuICAgICAqICAgICAgIGFuZCBvdXRwdXR0aW5nIHRoZSBZIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFggdmFsdWVzIHRoYXQgZmFsbCBjbG9zZXN0IHRvIGVhY2ggaHVuZHJlZHRoICguMDEsIC4wMiwgLi4uKS5cbiAgICAgKiAgICAgICBUaGlzIGFsbG93cyBhIHF1aWNrIGxvb2t1cCBiYXNlZCBvbiBhbmltYXRpb24gcHJvZ3Jlc3MuIFByb2dyZXNzICglKSAqIGFycmF5IGxlbmd0aCBpcyB0aGUgaW5kZXggb2YgdGhlIFkgdmFsdWUuXG4gICAgICogQXJnczogbm9uZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGN1YmljQmV6aWVyRGVmaW5lZCgpIHtcbiAgICAgICAgdmFyIHlDb29yZGluYXRlcyA9IFswLCAwLjAwMDA2LCAwLjAwMDI0LCAwLjAwMDU0LCAwLjAwMDk3LCAwLjAwMTUzLCAwLjAwMjIxLCAwLjAwMzAzLCAwLjAwMzk4LCAwLjAwNTA2LCAwLjAwNjI5LCAwLjAwNzY1LCAwLjAwOTE2LCAwLjAxMDgxLCAwLjAxMjYsIDAuMDE0NTUsIDAuMDE2NjQsIDAuMDE4ODksIDAuMDIxMywgMC4wMjM4NiwgMC4wMjY1OCwgMC4wMjk0NiwgMC4wMzI1LCAwLjAzNTcxLCAwLjAzOTA4LCAwLjA0MjYyLCAwLjA0NjMyLCAwLjA1MDE5LCAwLjA1NDIzLCAwLjA1ODQ0LCAwLjA2MjgzLCAwLjA2NzM4LCAwLjA3MjEsIDAuMDc2OTksIDAuMDgyMDYsIDAuMDg3MywgMC4wOTI3LCAwLjA5ODI3LCAwLjEwNCwgMC4xMDk5LCAwLjExNTk3LCAwLjEyMjE5LCAwLjEyODU3LCAwLjEzNTEsIDAuMTQxNzksIDAuMTQ4NjEsIDAuMTU1NTksIDAuMTYyNzEsIDAuMTY5OTUsIDAuMTc3MzQsIDAuMTg0ODQsIDAuMTkyNDcsIDAuMjAwMjEsIDAuMjA4MDUsIDAuMjE2LCAwLjIyNDA1LCAwLjIzMjE5LCAwLjI0MDQxLCAwLjI0ODcxLCAwLjI1NzA4LCAwLjI2NTUyLCAwLjI3NDAxLCAwLjI4MjU2LCAwLjI5MTE0LCAwLjI5OTc4LCAwLjMwODQ0LCAwLjMxNzEyLCAwLjMyNTgzLCAwLjMzNDU1LCAwLjM0MzI4LCAwLjM1MiwgMC4zNjA3MywgMC4zNjk0NSwgMC4zNzgxNSwgMC4zODY4MiwgMC4zOTU0OCwgMC40MDQxMSwgMC40MTI2OSwgMC40MjEyNiwgMC40Mjk3NywgMC40MzgyNCwgMC40NDY2NiwgMC40NTUwMiwgMC40NjMzNCwgMC40NzE2LCAwLjQ3OTgsIDAuNDg3OTMsIDAuNDk2LCAwLjUwMzk5LCAwLjUxMTkyLCAwLjUxOTc4LCAwLjUyNzU3LCAwLjUzNTI4LCAwLjU0MjkzLCAwLjU1MDQ5LCAwLjU1Nzk2LCAwLjU2NTM4LCAwLjU3MjcsIDAuNTc5OTYsIDAuNTg3MTMsIDAuNTk0MjEsIDAuNjAxMjIsIDAuNjA4MTUsIDAuNjE1LCAwLjYyMTc1LCAwLjYyODQ0LCAwLjYzNTA0LCAwLjY0MTU3LCAwLjY0OCwgMC42NTQzNywgMC42NjA2NCwgMC42NjY4NCwgMC42NzI5NiwgMC42NzksIDAuNjg0OTYsIDAuNjkwODQsIDAuNjk2NjUsIDAuNzAyMzgsIDAuNzA4MDMsIDAuNzEzNiwgMC43MTkxMSwgMC43MjQ1MiwgMC43Mjk4OCwgMC43MzUxNSwgMC43NDAzNiwgMC43NDU0OSwgMC43NTA1NCwgMC43NTU1NCwgMC43NjA0NSwgMC43NjUzLCAwLjc3MDA3LCAwLjc3NDc5LCAwLjc3OTQyLCAwLjc4NCwgMC43ODg1MSwgMC43OTI5NSwgMC43OTczMywgMC44MDE2MywgMC44MDU4OSwgMC44MTAwNywgMC44MTQxOSwgMC44MTgyNSwgMC44MjIyNSwgMC44MjYxOSwgMC44MzAwNywgMC44MzM4OCwgMC44Mzc2NSwgMC44NDEzNSwgMC44NDUsIDAuODQ4NTgsIDAuODUyMTEsIDAuODU1NTksIDAuODU5MDIsIDAuODYyMzksIDAuODY1NywgMC44Njg5NSwgMC44NzIxNywgMC44NzUzMiwgMC44Nzg0MiwgMC44ODE0OSwgMC44ODQ0OCwgMC44ODc0MywgMC44OTAzNCwgMC44OTMxOSwgMC44OTYsIDAuODk4NzYsIDAuOTAxNDcsIDAuOTA0MTQsIDAuOTA2NzUsIDAuOTA5MzMsIDAuOTExODUsIDAuOTE0MzQsIDAuOTE2NzgsIDAuOTE5MTcsIDAuOTIxNTIsIDAuOTIzODMsIDAuOTI2MDksIDAuOTI4MzEsIDAuOTMwNDksIDAuOTMyNjQsIDAuOTM0NzMsIDAuOTM2OCwgMC45Mzg4MSwgMC45NDA3OSwgMC45NDI3MywgMC45NDQ2MywgMC45NDY1LCAwLjk0ODMyLCAwLjk1MDExLCAwLjk1MTg2LCAwLjk1MzU3LCAwLjk1NTI1LCAwLjk1Njg5LCAwLjk1ODQ5LCAwLjk2MDA2LCAwLjk2MTYsIDAuOTYzMDksIDAuOTY0NTUsIDAuOTY1OTksIDAuOTY3MzgsIDAuOTY4NzQsIDAuOTcwMDcsIDAuOTcxMzYsIDAuOTcyNjMsIDAuOTczODYsIDAuOTc1MDYsIDAuOTc2MjMsIDAuOTc3MzYsIDAuOTc4NDcsIDAuOTc5NTQsIDAuOTgwNTgsIDAuOTgxNTksIDAuOTgyNTgsIDAuOTgzNTMsIDAuOTg0NDUsIDAuOTg1MzUsIDAuOTg2MjEsIDAuOTg3MDUsIDAuOTg3ODYsIDAuOTg4NjQsIDAuOTg5MzksIDAuOTkwMTEsIDAuOTkwODEsIDAuOTkxNDcsIDAuOTkyMTIsIDAuOTkyNzMsIDAuOTkzMzIsIDAuOTkzODgsIDAuOTk0NDIsIDAuOTk0OTMsIDAuOTk1NDEsIDAuOTk1ODcsIDAuOTk2MywgMC45OTY3MSwgMC45OTcwOSwgMC45OTc0NSwgMC45OTc3OSwgMC45OTgxLCAwLjk5ODM4LCAwLjk5ODY1LCAwLjk5ODg4LCAwLjk5OTEsIDAuOTk5MjksIDAuOTk5NDYsIDAuOTk5NiwgMC45OTk3MiwgMC45OTk4MiwgMC45OTk5LCAwLjk5OTk2LCAwLjk5OTk5LCAxXTtcbiAgICAgICAgdmFyIGxlbiA9IHlDb29yZGluYXRlcy5sZW5ndGggLSAxO1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgZWFzZWluZyBmdW5jdGlvbiwgd2hpY2ggcmV0dXJucyBhbiBlYXNlZCB2YWx1ZSAoMOKAkzEpIGJhc2VkIG9uIHRoZSBwcm9ncmVzcyAoMOKAkzEsIGkuZSAwJS0xMDAlKVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHZhciBwID0gTWF0aC5yb3VuZChwcm9ncmVzcyAqIGxlbik7XG4gICAgICAgICAgICByZXR1cm4geUNvb3JkaW5hdGVzW3BdO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKlxuICAgICAqIEZ1bmM6IGdldE5hdHVyYWxIZWlnaHRcbiAgICAgKiBEZXNjOiBHZXQgdGhlIGhlaWdodCBvZiBhbiBlbGVtZW50IG9uIHRoZSBwYWdlIChiZWZvcmUgdmlzaWJseSByZW5kZXJpbmcgaXQgb24gdGhlIHBhZ2UpXG4gICAgICogQXJnczogQGVsIC0gSFRNTCBFbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gbWVhc3VyZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE5hdHVyYWxIZWlnaHQoZWwpIHtcbiAgICAgICAgdmFyIHdyYXBwZXIsIHRlc3REaXYsIGhlaWdodDtcblxuICAgICAgICB3cmFwcGVyID0gd3JhcElubmVyKGVsLCBcImRpdlwiKTtcbiAgICAgICAgaGVpZ2h0ID0gd3JhcHBlci5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgdW53cmFwKHdyYXBwZXIpO1xuXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfVxuXG5cblxuXG4gICAgLypcbiAgICAgKiBGdW5jOiB3cmFwSW5uZXJcbiAgICAgKiBEZXNjOiBXcmFwIHRoZSBjb250ZW50cyBvZiBhbiBlbGVtZW50IGluIGEgbmV3IEhUTUwgZWxlbWVudFxuICAgICAqIEFyZ3M6IEBlbCAtIEhUTUxFbGVtZW50IC0gVGhlIGVsZW1lbnQgd2hvc2UgY29udGVudHMgc2hvdWxkIGJlIHdyYXBwZWRcbiAgICAgKiAgICAgICBAd3JhcHBlciAtIFN0cmluZyAtIFRoZSB0eXBlIG9mIEhUTUwgZWxlbWVudCB0aGF0IHNob3VsZCB3cmFwIHRoZSBjb250ZW50c1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIHdyYXBJbm5lcihlbCwgd3JhcHBlcikge1xuICAgICAgICB2YXIgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQod3JhcHBlcik7XG5cbiAgICAgICAgLy8gQXBwZW5kIGEgd3JhcHBlciBub2RlXG4gICAgICAgIGVsLmFwcGVuZENoaWxkKHdyYXApO1xuXG4gICAgICAgIC8vIE1vdmUgYWxsIGNoaWxkcmVuIGludG8gdGhlIHdyYXBwZXIgZWxlbWVudFxuICAgICAgICB3aGlsZSAoZWwuZmlyc3RDaGlsZCAmJiBlbC5maXJzdENoaWxkICE9PSB3cmFwKSB3cmFwLmFwcGVuZENoaWxkKGVsLmZpcnN0Q2hpbGQpO1xuXG4gICAgICAgIHJldHVybiB3cmFwO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogRnVuYzogdW53cmFwXG4gICAgICogRGVzYzogVW53cmFwIHRoZSBwYXJlbnQgZWxlbWVudCBvZiB0aGUgc3BlY2lmaWVkIERPTSBlbGVtZW50XG4gICAgICogU3JjOiAgaHR0cHM6Ly9wbGFpbmpzLmNvbS9qYXZhc2NyaXB0L21hbmlwdWxhdGlvbi91bndyYXAtYS1kb20tZWxlbWVudC0zNS9cbiAgICAgKiBBcmdzOiBAZWwgLSBIVE1MRWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGRlc3Ryb3lcbiAgICAgKi9cbiAgICBmdW5jdGlvbiB1bndyYXAoZWwpIHtcbiAgICAgICAgLy8gZ2V0IHRoZSBlbGVtZW50J3MgcGFyZW50IG5vZGVcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG5cbiAgICAgICAgLy8gbW92ZSBhbGwgY2hpbGRyZW4gb3V0IG9mIHRoZSB3cmFwcGVyIGVsZW1lbnRcbiAgICAgICAgd2hpbGUgKGVsLmZpcnN0Q2hpbGQpIHBhcmVudC5pbnNlcnRCZWZvcmUoZWwuZmlyc3RDaGlsZCwgZWwpO1xuXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgZW1wdHkgZWxlbWVudFxuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoZWwpO1xuICAgIH1cblxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhbmltYXRlSGVpZ2h0OiBhbmltYXRlSGVpZ2h0LFxuICAgICAgICBnZXROYXR1cmFsSGVpZ2h0OiBnZXROYXR1cmFsSGVpZ2h0XG4gICAgfVxuXG5cbn0pKCk7IiwiLypcbiAqIE1vZHVsZTogQllVIE1haW5cbiAqIERlc2M6ICAgRnVuY3Rpb25zIHRoYXQgYXBwbHkgdG8gYWxsIEJZVSBwYWdlcywgY29tcG9uZW50cywgb3Igc2NyaXB0c1xuICovXG5cbnZhciBieXVfbWFpbiA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBkb2MgPSBkb2N1bWVudDtcblxuXHQvKlxuXHQgKiBIVE1MIFByb3RvdHlwZSBmdW5jdGlvbiBhc3NpZ25tZW50c1xuXHQgKiBEZXNjOiBNYWtlIGl0IGVhc3kgdG8gYWRkLCB0ZXN0LCBhbmQgcmVtb3ZlIEhUTUwgY2xhc3NlcyB2aWEgY29tcGF0aWJsZSwgcGxhaW4gSlNcblx0ICogU3JjOiAgaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9qYXZhc2NyaXB0L2FkZGNsYXNzLWZ1bmN0aW9uLyNjb21tZW50LTE2MTg0MDVcblx0ICovXG5cdFxuXHQvLyBIYXNDbGFzc1xuXHRIVE1MRWxlbWVudC5wcm90b3R5cGUuaGFzQ2xhc3MgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICByZXR1cm4gdGhpcy5jbGFzc05hbWUubWF0Y2gobmV3IFJlZ0V4cCgnKFxcXFxzfF4pJytuYW1lKycoXFxcXHN8JCknKSk7XG5cdH07XG5cblx0Ly8gQWRkQ2xhc3Ncblx0SFRNTEVsZW1lbnQucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24obmV3X2NsYXNzKSB7ICAgXG5cdCAgICB2YXIgbmMgPSBuZXdfY2xhc3Muc3BsaXQoXCIsXCIpO1xuXG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5jLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaWYgKChcIiBcIiArIHRoaXMuY2xhc3NOYW1lICsgXCIgXCIpLmluZGV4T2YoXCIgXCIgKyBuY1tpXSArIFwiIFwiKSA9PSAtMSkge1xuXHQgICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSArPSBcIiBcIiArIG5jW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8vIFJlbW92ZUNsYXNzXG5cdEhUTUxFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICBpZiAodGhpcy5oYXNDbGFzcyhuYW1lKSkge1xuXHQgICAgdmFyIHNlYXJjaCA9IG5ldyBSZWdFeHAoJyhcXFxcc3xeKScrbmFtZSsnKFxcXFxzfCQpJyk7IC8vIFJlZ0V4IHRvIGlkZW50aWZ5IG1hdGNoXG5cdCAgICB2YXIgcmVwbGFjZSA9IG5ldyBSZWdFeHAoJyhcXFxcc3xeKScrbmFtZSk7IC8vIFJlZ0V4IHRvIHJlcGxhY2UgaWYgbWF0Y2hlZFxuXHQgICAgaWYgKCB0aGlzLmNsYXNzTmFtZS5zZWFyY2goc2VhcmNoKSApIHtcblx0ICAgIFx0dGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZS5yZXBsYWNlKHJlcGxhY2UsJycpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblxuXG5cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IGV4ZWN1dGVPbkxvYWRcblx0ICogRGVzYzogRXhlY3V0ZSBzcGVjaWZpZWQgZnVuY3Rpb24gd2hlbiB0aGUgRE9NIGlzIHJlYWR5LiBIYW5kbGUgXG5cdCAqIEFyZ3M6IEBmdW5jdGlvbk5hbWUgLSBGdW5jdGlvbiBJZGVudGlmaWVyIC0gTmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gZXhlY3V0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZXhlY3V0ZU9uTG9hZCggZnVuY3Rpb25OYW1lICkge1xuXG5cdFx0Ly8gaW4gY2FzZSB0aGUgZG9jdW1lbnQgaXMgYWxyZWFkeSByZW5kZXJlZFxuXHRcdGlmIChkb2MucmVhZHlTdGF0ZSE9J2xvYWRpbmcnKSBmdW5jdGlvbk5hbWUoKTtcblxuXHRcdC8vIG1vZGVybiBicm93c2Vyc1xuXHRcdGVsc2UgaWYgKGRvYy5hZGRFdmVudExpc3RlbmVyKSBkb2MuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uTmFtZSk7XG5cblx0XHQvLyBJRSA8PSA4XG5cdFx0ZWxzZSBkb2MuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uKCl7XG5cdFx0ICAgIGlmIChkb2MucmVhZHlTdGF0ZT09J2NvbXBsZXRlJykgZnVuY3Rpb25OYW1lKCk7XG5cdFx0fSk7XG5cblx0fSAvLyBleGVjdXRlT25Mb2FkXG5cblxuXG5cblx0Lypcblx0ICogRnVuYzogZWxFeGlzdHNcblx0ICogRGVzYzogQ2hlY2sgd2hldGhlciBhbiBlbGVtZW50IGFwcGVhcnMgaW4gdGhlIERPTVxuXHQgKiBBcmdzOiBAY2xhc3NOYW1lIC0gU3RyaW5nIC0gTmFtZSBvZiB0aGUgY2xhc3Mgb24gdGhlIGVsZW1lbnQgdG8gc2VhcmNoIGZvclxuXHQgKiBcdFx0IEBjb250YWluZXIgLSBIVE1MIEVsZW1lbnQgLSBDb250ZXh0IGZvciBmaW5kaW5nIHRoZSBlbGVtZW50IChjb3VsZCBiZSBkb2N1bWVudClcblx0ICovXG5cdGZ1bmN0aW9uIGVsRXhpc3RzKCBjbGFzc05hbWUsIGNvbnRhaW5lciApIHtcblxuXHRcdHJldHVybiBjb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICkubGVuZ3RoID4gMDtcblxuXHR9IC8vIGVsRXhpc3RzXG5cblxuXG5cblx0Lypcblx0ICogRnVuYzogaGFzQ2hpbGRyZW5cblx0ICogRGVzYzogQ2hlY2sgd2hldGhlciBhbiBlbGVtZW50IGhhcyBjaGlsZHJlblxuXHQgKiBBcmdzOiBAY2xhc3NOYW1lIC0gU3RyaW5nIC0gTmFtZSBvZiB0aGUgZWxlbWVudCdzIGNsYXNzXG5cdCAqIFx0XHQgQGNvbnRhaW5lciAtIEhUTUwgRWxlbWVudCAtIENvbnRleHQgZm9yIGZpbmRpbmcgdGhlIGVsZW1lbnQgKGNvdWxkIGJlIGRvY3VtZW50KVxuXHQgKi9cblx0ZnVuY3Rpb24gaGFzQ2hpbGRyZW4oIGNsYXNzTmFtZSwgY29udGFpbmVyICkge1xuXG5cdFx0dmFyIGhhc0NoaWxkcmVuID0gZmFsc2U7XG5cdFx0dmFyIGVscztcblxuXHRcdGlmICggZWxFeGlzdHMoIGNsYXNzTmFtZSwgY29udGFpbmVyICkgKSB7XG5cdFx0XHRlbHMgPSBjb250YWluZXIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7XG5cblx0XHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZWxzLCBmdW5jdGlvbihlbCkge1xuXHRcdFx0XHRpZiAoZWwuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGhhc0NoaWxkcmVuID0gdHJ1ZTtcblx0XHRcdFx0fSBcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYXNDaGlsZHJlbjtcblxuXHR9IC8vIGhhc0NoaWxkcmVuXG5cblxuXG5cblx0Ly8gRXhwb3NlIHB1YmxpYyBtZXRob2RzXG5cdHJldHVybiB7XG5cdFx0ZXhlY3V0ZU9uTG9hZDogZXhlY3V0ZU9uTG9hZCxcblx0XHRlbEV4aXN0czogZWxFeGlzdHMsXG5cdFx0aGFzQ2hpbGRyZW46IGhhc0NoaWxkcmVuLFxuXHR9XG5cbn0pKCk7IiwidmFyIGJ5dV9oZWFkZXIgPSAoZnVuY3Rpb24oKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBkb2MgPSBkb2N1bWVudDsgLy8gUHV0IHRoaXMgaW4gYSB2YXJpYWJsZSB0byBlbmFibGUgc21hbGxlciBjb21wcmVzc2lvblxuXHR2YXIganNJbml0Q2xhc3MgPSAnanMtZW5hYmxlZCc7XG5cdHZhciBleHBhbmRlZEF0dHIgPSAnYXJpYS1leHBhbmRlZCc7XG5cdHZhciBtZW51T3BlbkNsYXNzID0gJ21lbnUtb3Blbic7XG5cblx0Ly8gRXhlY3V0ZSB0aGUgaW5pdGlhbGl6ZSBmdW5jdGlvblxuXHRieXVfbWFpbi5leGVjdXRlT25Mb2FkKCBpbml0ICk7XG5cblxuXG5cblxuXHQvKlxuXHQgKiBGdW5jOiBpbml0XG5cdCAqIERlc2M6IEluaXRpYWxpemUgdGhlIGhlYWRlciBidXR0b24gZm9yIGFsbCBCWVUgaGVhZGVycyBvbiBwYWdlXG5cdCAqIFx0XHQgKGhhbmRsZXMgbXVsdGlwbGUgaGVkZXJzIClcblx0ICogQXJnczogbm9uZVxuXHQgKi9cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblxuXHRcdHZhciBoZWFkZXJFbHMgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYnl1LWhlYWRlcicpO1xuXG5cdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChoZWFkZXJFbHMsIGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRlbmFibGVNb2JpbGVNZW51KCBlbCApO1xuXHRcdH0pO1xuXG5cdH0gLy8gaW5pdFxuXG5cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IGVuYWJsZU1vYmlsZU1lbnVcblx0ICogRGVzYzogSW5pdGlhbGl6ZSB0aGUgaGVhZGVyIGJ1dHRvblxuXHQgKiBBcmdzOiBAaGVhZGVyRWwgLSBIVE1MIEVsZW1lbnQgLSBUaGUgaGVhZGVyIHRoYXQgY29udGFpbnMgdGhlIG1vYmlsZSBtZW51IHRvIGVuYWJsZVxuXHQgKi9cblx0ZnVuY3Rpb24gZW5hYmxlTW9iaWxlTWVudSggaGVhZGVyRWwgKSB7XG5cblx0XHR2YXIgc2hvd01lbnVCdXR0b24gPSBieXVfbWFpbi5lbEV4aXN0cygnYnl1LXNpdGUtbmF2aWdhdGlvbicsIGhlYWRlckVsKSB8fCBieXVfbWFpbi5oYXNDaGlsZHJlbignYnl1LWFjdGlvbi1pZC1zZWFyY2gnLCBoZWFkZXJFbCk7XG5cblx0XHRpZiAoIHNob3dNZW51QnV0dG9uICkge1xuXHRcdFx0aGVhZGVyRWwuYWRkQ2xhc3MoanNJbml0Q2xhc3MpO1xuXHRcdFx0aW5pdE1lbnVCdXR0b24oIGhlYWRlckVsICk7XG5cdFx0fVxuXG5cdH0gLy8gZW5hYmxlTW9iaWxlTWVudVxuXG5cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IGluaXRNZW51QnV0dG9uXG5cdCAqIERlc2M6IFxuXHQgKiBBcmdzOiBAaGVhZGVyRWwgLSBIVE1MIEVsZW1lbnQgLSBUaGUgaGVhZGVyIGVsZW1lbnQgdGhhdCBjb250YWlucyB0aGUgbWVudSBidXR0b24gdG8gZW5hYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBpbml0TWVudUJ1dHRvbiggaGVhZGVyRWwgKSB7XG5cdFx0dmFyIG1lbnVCdXR0b24gPSBoZWFkZXJFbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdieXUtbWVudS1idXR0b24nKVswXTtcblxuXHRcdG1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcblx0XHRcdGNsaWNrTWVudUJ1dHRvbiggZS50YXJnZXQsIGhlYWRlckVsICk7XG5cdFx0fSk7XG5cdH0gLy8gaW5pdE1lbnVCdXR0b25cblxuXG5cblxuXHQvKlxuXHQgKiBGdW5jOiBjbGlja01lbnVCdXR0b25cblx0ICogRGVzYzogSGFuZGxlIGNsaWNrIGV2ZW50cyBvbiBhIG1vYmlsZSBtZW51IGJ1dHRvbiB3aXRoaW4gYSBoZWFkZXJcblx0ICogQXJnczogQGJ0biAtIEhUTUwgRWxlbWVudCAtIFRoZSBidXR0b24gZWxlbWVudCB0aGF0IGhhcyBiZWVuIGNsaWNrZWRcblx0ICpcdFx0IEBoZWFkZXJFbCAtIEhUTUwgRWxlbWVudCAtIFRoZSBoZWFkZXIgZWxlbWVudCB3aG9zZSBtZW51IGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG5cdCAqL1xuXHRmdW5jdGlvbiBjbGlja01lbnVCdXR0b24oIGJ0biwgaGVhZGVyRWwgKSB7XG5cdFx0dmFyIG9wZW4gPSBidG4uZ2V0QXR0cmlidXRlKGV4cGFuZGVkQXR0cikgIT0gJ2ZhbHNlJztcblx0XHR2YXIgb3BlbmluZyA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vIE9wZW5cblx0XHRpZiAoICFvcGVuICYmICFvcGVuaW5nICkge1xuXHRcdFx0b3Blbk1lbnUoIGJ0biwgaGVhZGVyRWwgKTtcblx0XHR9XG5cblx0XHQvLyBDbG9zZVxuXHRcdGVsc2Uge1xuXHRcdFx0Y2xvc2VNZW51KCBidG4sIGhlYWRlckVsICk7XG5cdFx0fVxuXHR9IC8vIGNsaWNrTWVudUJ1dHRvblxuXG5cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IG9wZW5NZW51XG5cdCAqIERlc2M6IE9wZW4gYSBtb2JpbGUgbWVudSB3aXRoaW4gYSBoZWFkZXJcblx0ICogQXJnczogQGJ0biAtIEhUTUwgRWxlbWVudCAtIFRoZSBidXR0b24gZWxlbWVudCB0aGF0IGNvbnRyb2xzIHRoZSBtZW51IHdoaWNoIHNob3VsZCBiZSBvcGVuZWRcblx0ICpcdFx0IEBoZWFkZXJFbCAtIEhUTUwgRWxlbWVudCAtIFRoZSBoZWFkZXIgZWxlbWVudCB3aG9zZSBtZW51IHNob3VsZCBiZSBvcGVuZWRcblx0ICovXG5cdGZ1bmN0aW9uIG9wZW5NZW51KCBidG4sIGhlYWRlckVsICkge1xuXG5cdFx0Ly8gU2V0IHRoZSBvcGVuL2Nsb3NlZCBhdHRyaWJ1dGUgb24gdGhlIGJ1dHRvblxuXHRcdGJ0bi5zZXRBdHRyaWJ1dGUoZXhwYW5kZWRBdHRyLCB0cnVlKTsgXG5cblx0XHQvLyBTZXQgdGhlIG9wZW4vY2xvc2VkIGF0dHJpYnV0ZSBvbiB0aGUgaGVhZGVyXG5cdFx0aWYgKCAhaGVhZGVyRWwuaGFzQ2xhc3MoIG1lbnVPcGVuQ2xhc3MgKSApIHtcblx0XHRcdGhlYWRlckVsLmFkZENsYXNzKCBtZW51T3BlbkNsYXNzICk7XG5cdFx0fVxuXG5cdH0gLy8gb3Blbk1lbnVcblxuXG5cblx0Lypcblx0ICogRnVuYzogY2xvc2VNZW51XG5cdCAqIERlc2M6IENsb3NlIGEgbW9iaWxlIG1lbnUgd2l0aGluIGEgaGVhZGVyXG5cdCAqIEFyZ3M6IEBidG4gLSBIVE1MIEVsZW1lbnQgLSBUaGUgYnV0dG9uIGVsZW1lbnQgdGhhdCBjb250cm9scyB0aGUgbWVudSB3aGljaCBzaG91bGQgYmUgY2xvc2VkXG5cdCAqXHRcdCBAaGVhZGVyRWwgLSBIVE1MIEVsZW1lbnQgLSBUaGUgaGVhZGVyIGVsZW1lbnQgd2hvc2UgbWVudSBzaG91bGQgYmUgY2xvc2VkXG5cdCAqL1xuXHRmdW5jdGlvbiBjbG9zZU1lbnUoIGJ0biwgaGVhZGVyRWwgKSB7XG5cblx0XHQvLyBTZXQgdGhlIG9wZW4vY2xvc2VkIGF0dHJpYnV0ZSBvbiB0aGUgYnV0dG9uXG5cdFx0YnRuLnNldEF0dHJpYnV0ZShleHBhbmRlZEF0dHIsIGZhbHNlKTtcblxuXHRcdC8vIFNldCB0aGUgb3Blbi9jbG9zZWQgYXR0cmlidXRlIG9uIHRoZSBoZWFkZXJcblx0XHRoZWFkZXJFbC5yZW1vdmVDbGFzcyggbWVudU9wZW5DbGFzcyApO1xuXG5cdH0gLy8gY2xvc2VNZW51XG5cblxufSkoKTsiLCIvKlxuICogTW9kdWxlOiBCWVUgVGFibGVcbiAqIERlc2M6ICAgSGFuZGxlIHRhYmxlcyB0aGF0IGFyZSB3aWRlciB0aGFuIHRoaWVyIGNvbnRhaW5lclxuICovXG5cbnZhciBieXVfdGFibGUgPSAoZnVuY3Rpb24oKXtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGRvYyA9IGRvY3VtZW50O1xuXG5cblx0Ly8gRXhlY3V0ZSB0aGUgZnVuY3Rpb25cblx0Ynl1X21haW4uZXhlY3V0ZU9uTG9hZCggdXBkYXRlVGFibGVzICk7XG5cdFxuXG5cdC8qXG5cdCAqIEZ1bmM6IFVwZGF0ZVRhYmxlc1xuXHQgKiBEZXNjOiBEZXRlY3QgYW5kIGhhbmRsZSB0YWJsZXMgdGhhdCBhcmUgd2lkZXIgdGhhbiB0aGVpciBjb250YWluZXIuXG5cdCAqIFx0XHQgV29ya3Mgb24gdGFibGVzIGNvbnRhaW5lZCB3aXRoaW4gYW4gZWxlbWVudCBvZiBjbGFzcyBcInRhYmxlLWNvbnRhaW5lclwiLlxuXHQgKiBBcmdzOiBub25lXG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVUYWJsZXMoKSB7XG5cdFx0dmFyIGNvbnRhaW5lcnMgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYmxlLWNvbnRhaW5lclwiKTtcblxuXHRcdGZvciAodmFyIGk9MDsgaSA8IGNvbnRhaW5lcnMubGVuZ3RoOyBpKyspIHtcblx0XHQgICAgdmFyIGNvbnRhaW5lciA9IGNvbnRhaW5lcnNbaV07XG5cdFx0ICAgIHVwZGF0ZVRhYmxlKCBjb250YWluZXIgKTtcblx0XHR9XG5cdH1cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IFVwZGF0ZVRhYmxlXG5cdCAqIERlc2M6IENoZWNrIGlmIGEgdGFibGUgaXMgd2lkZXIgdGhhbiBpdHMgY29udGFpbmVyLCBhbmQgbWFyayBzY3JvbGxpbmcgcG9zaXRpb24gd2l0aGluIGl0XG5cdCAqIEFyZ3M6IEBjb250YWluZXIgLSBIVE1MIEVsZW1lbnQgLSBBIGNvbnRhaW5lciBlbGVtZW50IGZvciBhIHRhYmxlIChwcm9iYWJseSBvZiBjbGFzcyBcInRhYmxlLWNvbnRhaW5lclwiKVxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlVGFibGUoIGNvbnRhaW5lciApIHtcblx0XHR2YXIgY193aWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDtcblx0ICAgIHZhciB0YWJsZSA9IGNvbnRhaW5lci4gZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0YWJsZVwiKVswXTtcblx0ICAgIHZhciB0X3dpZHRoID0gdGFibGUub2Zmc2V0V2lkdGg7XG5cdCAgICB2YXIgdGFibGVfd2lkZV9jbGFzcyA9IFwidGFibGUtd2lkZVwiO1xuXHQgICAgdmFyIHN0YXJ0X3Zpc2libGVfY2xhc3MgPSBcInN0YXJ0LXZpc2libGVcIjtcblx0ICAgIHZhciBlbmRfdmlzaWJsZV9jbGFzcyA9IFwiZW5kLXZpc2libGVcIjtcblxuXHQgICAgaWYgKCBjX3dpZHRoIDwgdF93aWR0aCApIHtcblxuXHQgICAgXHQvLyBBZGQgdGFibGUgd2lkZSBjbGFzcyBpZiBpdCdzIG5vdCBhbHJlYWR5IHRoZXJlXG5cdCAgICBcdGlmICggIWNvbnRhaW5lci5oYXNDbGFzcyggdGFibGVfd2lkZV9jbGFzcyApICkgeyBcblx0XHQgICAgXHRjb250YWluZXIuYWRkQ2xhc3MoIHRhYmxlX3dpZGVfY2xhc3MgKTtcblx0XHQgICAgfVxuXG5cdCAgICBcdC8vIENoZWNrIGlmIHRoZSBzdGFydCBvZiB0aGUgdGFibGUgaXMgdmlzaWJsZSBhbmQgaGFuZGxlXG5cdCAgICBcdGlmICggdGFibGUuc2Nyb2xsTGVmdCA9PSAwICkge1xuXHQgICAgXHRcdGlmICggIWNvbnRhaW5lci5oYXNDbGFzcyggc3RhcnRfdmlzaWJsZV9jbGFzcyApICkge1xuXHRcdCAgICBcdFx0Y29udGFpbmVyLmFkZENsYXNzKCBzdGFydF92aXNpYmxlX2NsYXNzICk7XG5cdCAgICBcdFx0fVxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcyggc3RhcnRfdmlzaWJsZV9jbGFzcyApO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0Ly8gQ2hlY2sgaWYgdGhlIGVuZCBvZiB0aGUgdGFibGUgaXMgdmlzaWJsZSBhbmQgaGFuZGxlXG5cdCAgICBcdGlmICggdF93aWR0aCAtIHRhYmxlLnNjcm9sbExlZnQgPT0gY193aWR0aCApIHtcblx0ICAgIFx0XHRpZiAoICFjb250YWluZXIuaGFzQ2xhc3MoIGVuZF92aXNpYmxlX2NsYXNzICkgKSB7XG5cdFx0ICAgIFx0XHRjb250YWluZXIuYWRkQ2xhc3MoIGVuZF92aXNpYmxlX2NsYXNzICk7XG5cdCAgICBcdFx0fVxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcyggZW5kX3Zpc2libGVfY2xhc3MgKTtcblx0ICAgIFx0fVxuXHQgICAgfSBcblxuXHQgICAgLy8gVGhlIHRhYmxlIGlzIG5vdCB0b28gd2lkZSBmb3IgaXRzIGNvbnRhaW5lclxuXHQgICAgZWxzZSB7XG5cdCAgICBcdGNvbnRhaW5lci5yZW1vdmVDbGFzcyggdGFibGVfd2lkZV9jbGFzcyApO1xuXHQgICAgfVxuXHR9XG5cbn0pKCk7Il19
