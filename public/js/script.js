var animate=function(){var a,n,l=(n=(a=[0,6e-5,24e-5,54e-5,97e-5,.00153,.00221,.00303,.00398,.00506,.00629,.00765,.00916,.01081,.0126,.01455,.01664,.01889,.0213,.02386,.02658,.02946,.0325,.03571,.03908,.04262,.04632,.05019,.05423,.05844,.06283,.06738,.0721,.07699,.08206,.0873,.0927,.09827,.104,.1099,.11597,.12219,.12857,.1351,.14179,.14861,.15559,.16271,.16995,.17734,.18484,.19247,.20021,.20805,.216,.22405,.23219,.24041,.24871,.25708,.26552,.27401,.28256,.29114,.29978,.30844,.31712,.32583,.33455,.34328,.352,.36073,.36945,.37815,.38682,.39548,.40411,.41269,.42126,.42977,.43824,.44666,.45502,.46334,.4716,.4798,.48793,.496,.50399,.51192,.51978,.52757,.53528,.54293,.55049,.55796,.56538,.5727,.57996,.58713,.59421,.60122,.60815,.615,.62175,.62844,.63504,.64157,.648,.65437,.66064,.66684,.67296,.679,.68496,.69084,.69665,.70238,.70803,.7136,.71911,.72452,.72988,.73515,.74036,.74549,.75054,.75554,.76045,.7653,.77007,.77479,.77942,.784,.78851,.79295,.79733,.80163,.80589,.81007,.81419,.81825,.82225,.82619,.83007,.83388,.83765,.84135,.845,.84858,.85211,.85559,.85902,.86239,.8657,.86895,.87217,.87532,.87842,.88149,.88448,.88743,.89034,.89319,.896,.89876,.90147,.90414,.90675,.90933,.91185,.91434,.91678,.91917,.92152,.92383,.92609,.92831,.93049,.93264,.93473,.9368,.93881,.94079,.94273,.94463,.9465,.94832,.95011,.95186,.95357,.95525,.95689,.95849,.96006,.9616,.96309,.96455,.96599,.96738,.96874,.97007,.97136,.97263,.97386,.97506,.97623,.97736,.97847,.97954,.98058,.98159,.98258,.98353,.98445,.98535,.98621,.98705,.98786,.98864,.98939,.99011,.99081,.99147,.99212,.99273,.99332,.99388,.99442,.99493,.99541,.99587,.9963,.99671,.99709,.99745,.99779,.9981,.99838,.99865,.99888,.9991,.99929,.99946,.9996,.99972,.99982,.9999,.99996,.99999,1]).length-1,function(e){var t=Math.round(e*n);return a[t]}),u="animating";return{animateHeight:function(t,e){var n,s,i,r,a=Object.assign({start:0,end:100,fadeIn:!0,duration:200,units:"px"},e),o=l;t.style.height=a.start+a.units,t.addClass(u),t.animation=(n={duration:a.duration,delta:o,step:function(e){t.style.height=a.start+(a.end-a.start)*e+a.units},finish:function(){t.removeClass(u),t.style.removeProperty("height"),"function"==typeof a.finish&&a.finish()},interrupt:function(){t.removeClass(u),t.style.removeProperty("height"),"function"==typeof a.interrupt&&a.interrupt()}},s=new Date,i=!1,r=function(){var e=new Date-s,t=e/n.duration;1<t&&(t=1);var a=n.delta(t);n.step(a),i&&n.interrupt?n.interrupt():t<1?window.requestAnimationFrame(r):n.finish&&n.finish()},window.requestAnimationFrame(r),{stop:function(){i=!0}})},getNaturalHeight:function(e,t){var a,n;return t=t||"",(a=function(e,t){var a=document.createElement(t);for(e.appendChild(a);e.firstChild&&e.firstChild!==a;)a.appendChild(e.firstChild);return a}(e,"div")).className=t,n=a.offsetHeight,function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}(a),n}}}(),byu_main=function(){var t=document;function s(e,t){return 0<t.getElementsByClassName(e).length}return HTMLElement.prototype.hasClass=function(e){return this.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},HTMLElement.prototype.addClass=function(e){for(var t=e.split(","),a=0;a<t.length;a++)-1==(" "+this.className+" ").indexOf(" "+t[a]+" ")&&(this.className+=" "+t[a]);return this},HTMLElement.prototype.removeClass=function(e){if(this.hasClass(e)){var t=new RegExp("(\\s|^)"+e+"(\\s|$)"),a=new RegExp("(\\s|^)"+e);this.className.search(t)&&(this.className=this.className.replace(a,""))}return this},{executeOnLoad:function(e){"loading"!=t.readyState?e():t.addEventListener?t.addEventListener("DOMContentLoaded",e):t.attachEvent("onreadystatechange",function(){"complete"==t.readyState&&e()})},elExists:s,hasChildren:function(e,t){var a,n=!1;return s(e,t)&&(a=t.getElementsByClassName(e),Array.prototype.forEach.call(a,function(e){0<e.children.length&&(n=!0)})),n}}}(),byu_header=function(){"use strict";var l,t=document,a="js-enabled",u="aria-expanded",d="menu-open",n="byu-site-navigation",s="byu-action-id-search";byu_main.executeOnLoad(function(){var e=t.getElementsByClassName("byu-header");l=t.getElementById("byu-main"),Array.prototype.forEach.call(e,function(e){var t,o;(t=e).hasNav=byu_main.elExists(n,t),t.hasActions=byu_main.hasChildren(s,t),(t.hasNav||t.hasActions)&&(t.addClass(a),(o=t).getElementsByClassName("byu-menu-button")[0].addEventListener("click",function(e){var t,a,n,s,i,r;t=e.target,a=o,"false"==t.getAttribute(u)?(s=t,r=(i=a).getBoundingClientRect().height||i.offsetHeight,s.setAttribute(u,!0),i.hasClass(d)||(i.addClass(d),l.style.top=r+"px")):(n=a,t.setAttribute(u,!1),n.removeClass(d),l.style.top="")}),t.navEl=t.getElementsByClassName(n)[0],t.actionsEl=t.getElementsByClassName(s)[0])})})}(),byu_table=function(){"use strict";var n=document;function s(e){var t=e.offsetWidth,a=e.getElementsByTagName("table")[0],n=a.offsetWidth,s="table-wide",i="start-visible",r="end-visible";t<n?(e.hasClass(s)||e.addClass(s),0==a.scrollLeft?e.hasClass(i)||e.addClass(i):e.removeClass(i),n-a.scrollLeft==t?e.hasClass(r)||e.addClass(r):e.removeClass(r)):e.removeClass(s)}byu_main.executeOnLoad(function(){for(var e=n.getElementsByClassName("table-container"),t=0;t<e.length;t++){var a=e[t];s(a)}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGUuanMiLCJtYWluLmpzIiwiaGVhZGVyL2hlYWRlci5qcyIsIjAtZm91bmRhdGlvbi90YWJsZS90YWJsZS5qcyJdLCJuYW1lcyI6WyJhbmltYXRlIiwieUNvb3JkaW5hdGVzIiwibGVuIiwiZWFzZUZ1bmN0aW9uIiwibGVuZ3RoIiwicHJvZ3Jlc3MiLCJwIiwiTWF0aCIsInJvdW5kIiwiYW5pbWF0aW5nQ2xhc3MiLCJhbmltYXRlSGVpZ2h0IiwiZWwiLCJzZXR0aW5nc09iaiIsIm9wdHMiLCJzdGFydCIsImludGVycnVwdCIsInJlbmRlciIsInMiLCJPYmplY3QiLCJhc3NpZ24iLCJlbmQiLCJmYWRlSW4iLCJkdXJhdGlvbiIsInVuaXRzIiwiZWFzZSIsInN0eWxlIiwiaGVpZ2h0IiwiYWRkQ2xhc3MiLCJhbmltYXRpb24iLCJkZWx0YSIsInN0ZXAiLCJmaW5pc2giLCJyZW1vdmVDbGFzcyIsInJlbW92ZVByb3BlcnR5IiwiRGF0ZSIsInRpbWVQYXNzZWQiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzdG9wIiwiZ2V0TmF0dXJhbEhlaWdodCIsImNsYXNzTmFtZSIsIndyYXBwZXIiLCJ3cmFwIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJmaXJzdENoaWxkIiwid3JhcElubmVyIiwib2Zmc2V0SGVpZ2h0IiwicGFyZW50IiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsInJlbW92ZUNoaWxkIiwidW53cmFwIiwiYnl1X21haW4iLCJkb2MiLCJlbEV4aXN0cyIsImNvbnRhaW5lciIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJIVE1MRWxlbWVudCIsInByb3RvdHlwZSIsImhhc0NsYXNzIiwibmFtZSIsInRoaXMiLCJtYXRjaCIsIlJlZ0V4cCIsIm5ld19jbGFzcyIsIm5jIiwic3BsaXQiLCJpIiwiaW5kZXhPZiIsInNlYXJjaCIsInJlcGxhY2UiLCJleGVjdXRlT25Mb2FkIiwiZnVuY3Rpb25OYW1lIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsImhhc0NoaWxkcmVuIiwiZWxzIiwiQXJyYXkiLCJmb3JFYWNoIiwiY2FsbCIsImNoaWxkcmVuIiwiYnl1X2hlYWRlciIsIm1haW5FbCIsImpzSW5pdENsYXNzIiwiZXhwYW5kZWRBdHRyIiwibWVudU9wZW5DbGFzcyIsInNpdGVOYXZDbGFzcyIsInNpdGVBY3Rpb25DbGFzcyIsImhlYWRlckVscyIsImdldEVsZW1lbnRCeUlkIiwiaGVhZGVyRWwiLCJoYXNOYXYiLCJoYXNBY3Rpb25zIiwiZSIsImJ0biIsImhlYWRlckhlaWdodCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInNldEF0dHJpYnV0ZSIsInRvcCIsIm5hdkVsIiwiYWN0aW9uc0VsIiwiYnl1X3RhYmxlIiwidXBkYXRlVGFibGUiLCJjX3dpZHRoIiwib2Zmc2V0V2lkdGgiLCJ0YWJsZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidF93aWR0aCIsInRhYmxlX3dpZGVfY2xhc3MiLCJzdGFydF92aXNpYmxlX2NsYXNzIiwiZW5kX3Zpc2libGVfY2xhc3MiLCJzY3JvbGxMZWZ0IiwiY29udGFpbmVycyJdLCJtYXBwaW5ncyI6IkFBR0EsSUFBQUEsUUFBQSxXQUVBLElBNEhBQyxFQUNBQyxFQTdIQUMsR0E2SEFELEdBREFELEVBQUEsQ0FBQSxFQUFBLEtBQUEsTUFBQSxNQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsTUFBQSxNQUFBLE9BQUEsS0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE1BQUEsT0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsS0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsS0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxNQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFBLE9BQUEsT0FBQSxPQUFB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WUFBQW1GLElBTUExRCxFQUFBekIsWUFBQWlGLEdBNURBM0QsU0FBQW1CLGNBU0EsV0FHQSxJQUZBLElBQUE0QyxFQUFBOUQsRUFBQUcsdUJBQUEsbUJBRUFXLEVBQUEsRUFBQUEsRUFBQWdELEVBQUFqSCxPQUFBaUUsSUFBQSxDQUNBLElBQUFaLEVBQUE0RCxFQUFBaEQsR0FDQXNDLEVBQUFsRCxNQXRCQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqL1xuLyohIEFuaW1hdGUgKi9cblxudmFyIGFuaW1hdGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgZWFzZUZ1bmN0aW9uID0gY3ViaWNCZXppZXJEZWZpbmVkKCk7XG4gICAgdmFyIGFuaW1hdGluZ0NsYXNzID0gJ2FuaW1hdGluZyc7XG5cbiAgICAvLyBBbmltYXRpb25cblxuICAgIC8qXG4gICAgICogRnVuYzogYW5pbWF0ZUhlaWdodFxuICAgICAqIERlc2M6IEFuaW1hdGUgdGhlIGhlaWdodCBvZiBhbiBpdGVtXG4gICAgICogQXJnczogQGVsIC0gSFRNTCBFbGVtZW50IC0gVGhlIEhUTUwgZWxlbWVudCB0byBhbmltYXRlXG4gICAgICogICAgICAgQHNldHRpbmdzT2JqIC0gT2JqZWN0IC0gQ29udGFpbnMgcHJvcGVydGllcyB0byBvdmVycmlkZSBkZWZhdWx0IHNldHRpbmdzXG4gICAgICovXG4gICAgZnVuY3Rpb24gYW5pbWF0ZUhlaWdodChlbCwgc2V0dGluZ3NPYmopIHtcblxuICAgICAgICAvLyBTZXQgZGVmYXVsdHMgYW5kIG92ZXJ3cml0ZSB3aXRoIHBhc3NlZCBvYmplY3QgKHNldHRpbmdzT2JqKVxuICAgICAgICB2YXIgcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgICBlbmQ6IDEwMCxcbiAgICAgICAgICAgIGZhZGVJbjogdHJ1ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICB1bml0czogXCJweFwiLFxuICAgICAgICB9LCBzZXR0aW5nc09iaik7XG5cbiAgICAgICAgdmFyIGVhc2UgPSBlYXNlRnVuY3Rpb247XG5cbiAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcy5zdGFydCArIHMudW5pdHM7XG4gICAgICAgIGVsLmFkZENsYXNzKGFuaW1hdGluZ0NsYXNzKTtcblxuICAgICAgICAvLyBBbmltYXRlIGhlaWdodCBhdCBpbnB1dCByYXRlXG4gICAgICAgIGVsLmFuaW1hdGlvbiA9IGFuaW1hdGUoe1xuICAgICAgICAgICAgZHVyYXRpb246IHMuZHVyYXRpb24sXG4gICAgICAgICAgICBkZWx0YTogZWFzZSxcbiAgICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcy5zdGFydCArICgocy5lbmQgLSBzLnN0YXJ0KSAqIGRlbHRhKSArIHMudW5pdHM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmluaXNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVDbGFzcyhhbmltYXRpbmdDbGFzcyk7XG4gICAgICAgICAgICAgICAgZWwuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJoZWlnaHRcIik7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzLmZpbmlzaCA9PSBcImZ1bmN0aW9uXCIpIHsgcy5maW5pc2goKTsgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGludGVycnVwdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2xhc3MoYW5pbWF0aW5nQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiaGVpZ2h0XCIpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygcy5pbnRlcnJ1cHQgPT0gXCJmdW5jdGlvblwiKSB7IHMuaW50ZXJydXB0KCk7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9IC8vIGFuaW1hdGVIZWlnaHRcblxuXG4gICAgLypcbiAgICAgKiBGdW5jOiBhbmltYXRlXG4gICAgICogRGVzYzogQW5pbWF0ZSBmdW5jdGlvblxuICAgICAqIFNyYzogIGh0dHA6Ly9qYXZhc2NyaXB0LmluZm8vdHV0b3JpYWwvYW5pbWF0aW9uIChtYWluIGFuaW1hdGlvbiBmdW5jdGlvbnMpXG4gICAgICogICAgICAgaHR0cDovL2NyZWF0aXZlanMuY29tL3Jlc291cmNlcy9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUvIChyZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXG4gICAgICogQXJnczogQG9wdHMgLSBPYmplY3QgLSBUaGUgb3B0aW9ucyBvYmplY3RcbiAgICAgKiAgICAgICAgIGNvbnRhaW5zOiBAZHVyYXRpb24gLSBOdW1iZXIgLSBNaWxsaXNlY29uZHMgZm9yIHRvdGFsIGFuaW1hdGlvblxuICAgICAqICAgICAgICAgICAgICAgICAgIEBkZWx0YSAtIEZ1bmN0aW9uIC0gRWFzaW5nIGZ1bmN0aW9uXG4gICAgICogICAgICAgICAgICAgICAgICAgQHN0ZXAgLSBGdW5jdGlvbiAtIFJlc3VsdCBmdW5jdGlvbiAod2hhdCBzaG91bGQgaGFwcGVuIG9uIHNjcmVlbiBlYWNoIGZyYW1lKVxuICAgICAqICAgICAgICAgICAgICAgICAgIEBmaW5pc2ggLSBGdW5jdGlvbiAtIG9wdGlvbmFsLSBFbmQgZnVuY3Rpb24gKHdoYXQgaGFwcGVucyB3aGVuIGFuaW1hdGlvbiBmaW5pc2hlcylcbiAgICAgKiAgICAgICAgICAgICAgICAgICBAaW50ZXJydXB0IC0gRnVuY3Rpb24gLSBvcHRpb25hbC0gRW5kIGZ1bmN0aW9uICh3aGF0IGhhcHBlbnMgaWYgYW5pbWF0aW9uIGlzIGludGVycnVwdGVkKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFuaW1hdGUob3B0cykge1xuXG4gICAgICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCk7IC8vIEdldCB0aGUgc3RhcnQgdGltZVxuICAgICAgICB2YXIgaW50ZXJydXB0ID0gZmFsc2U7IC8vIElmIHRoaXMgaXMgdHJ1ZSwgYW5pbWF0aW9uIHdpbGwgc3RvcFxuICAgICAgICB2YXIgc3RvcCA9IGZ1bmN0aW9uKCkgeyBpbnRlcnJ1cHQgPSB0cnVlOyB9OyAvLyBTdG9wcyB0aGlzIGFuaW1hdGlvblxuXG4gICAgICAgIC8vIFRoZSByZW5kZXIgZnVuY3Rpb25cbiAgICAgICAgdmFyIHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRpbWVQYXNzZWQgPSBuZXcgRGF0ZSgpIC0gc3RhcnQ7IC8vIFRoZSBhbW91bnQgb2YgdGltZSBlbGFwc2VkIHNpbmNlIHN0YXJ0XG4gICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSB0aW1lUGFzc2VkIC8gb3B0cy5kdXJhdGlvbjsgLy8gUGVyY2VudGFnZSBvZiB0aW1lIHBhc3NlZCBpbiBmdWxsIGV4cGVjdGVkIGR1cmF0aW9uXG5cbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyA+IDEpIHsgcHJvZ3Jlc3MgPSAxOyB9IC8vIENhcCBwZXJjZW50YWdlIGF0IDEgKDEwMCUpXG5cbiAgICAgICAgICAgIHZhciBkZWx0YSA9IG9wdHMuZGVsdGEocHJvZ3Jlc3MpOyAvLyBBcHBseSBlYXNpbmcgZnVuY3Rpb25cbiAgICAgICAgICAgIG9wdHMuc3RlcChkZWx0YSk7IC8vIEFwcGx5IHRoZSBzdGVwIGZ1Y3Rpb24gZnJvbSB0aGUgb3B0aW9ucyBvYmplY3QgKHJlbmRlcnMgYSBjaGFuZ2Ugb24gc2NyZWVuKVxuXG4gICAgICAgICAgICAvLyBJbnRlcnJ1cHQsIGNvbnRpbnVlLCBvciBmaW5pc2ggZGVwZW5kaW5nIG9uIHByb2dyZXNzXG4gICAgICAgICAgICBpZiAoaW50ZXJydXB0ICYmIG9wdHMuaW50ZXJydXB0KSB7XG4gICAgICAgICAgICAgICAgb3B0cy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3MgPCAxKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRzLmZpbmlzaCkge1xuICAgICAgICAgICAgICAgIG9wdHMuZmluaXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU3RhcnQgdGhlIGFuaW1hdGlvblxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG5cbiAgICAgICAgcmV0dXJuIHsgc3RvcDogc3RvcCB9O1xuXG4gICAgfSAvLyBhbmltYXRlXG5cblxuICAgIC8qXG4gICAgICogRnVuYzogZWFzZUluT3V0XG4gICAgICogRGVzYzogRWFzaW5nIGZ1bmN0aW9uXG4gICAgICogQXJnczogQHBvd2VyIC0gUG9zaXRpdmUgSW50ZWdlciAtIE1hdGggcG93ZXIgdGhhdCBzcGVjaWZpZXMgZWFzaW5nIGN1cnZlIChkZWZhdWx0IDMpXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFzZUluT3V0KHBvd2VyKSB7XG4gICAgICAgIHBvd2VyID0gcG93ZXIgPyBwb3dlciA6IDM7XG4gICAgICAgIHZhciBkZWx0YSA9IGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5wb3cocHJvZ3Jlc3MsIHBvd2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAgICAgaWYgKHByb2dyZXNzIDwgLjUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlbHRhKDIgKiBwcm9ncmVzcykgLyAyXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuICgyIC0gZGVsdGEoMiAqICgxIC0gcHJvZ3Jlc3MpKSkgLyAyXG4gICAgICAgIH1cbiAgICB9IC8vIGVhc2VJbk91dFxuXG5cbiAgICAvKlxuICAgICAqIEZ1bmM6IGN1YmljQmV6aWVyRGVmaW5lZFxuICAgICAqIERlc2M6IEVhc2luZyBmdW5jdGlvbiBiYXNlZCBvbiBDU1MgZWFzaW5nOiBjdWJpYy1iZXppZXIoMC4zLCAwLCAwLjMsIDEpLlxuICAgICAqICAgICAgIHlDb29yZGluYXRlcyBnZW5lcmF0ZWQgYnkgcnVubmluZyBhIGN1YmljIGJlemllciBmdW5jdGlvbiAocmV0dXJuaW5nIFggYW5kIFkgY29vcmRpbmF0ZXMgYmFzZWQgb24gdGltZSlcbiAgICAgKiAgICAgICBhbmQgb3V0cHV0dGluZyB0aGUgWSB2YWx1ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBYIHZhbHVlcyB0aGF0IGZhbGwgY2xvc2VzdCB0byBlYWNoIGh1bmRyZWR0aCAoLjAxLCAuMDIsIC4uLikuXG4gICAgICogICAgICAgVGhpcyBhbGxvd3MgYSBxdWljayBsb29rdXAgYmFzZWQgb24gYW5pbWF0aW9uIHByb2dyZXNzLiBQcm9ncmVzcyAoJSkgKiBhcnJheSBsZW5ndGggaXMgdGhlIGluZGV4IG9mIHRoZSBZIHZhbHVlLlxuICAgICAqIEFyZ3M6IG5vbmVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjdWJpY0JlemllckRlZmluZWQoKSB7XG4gICAgICAgIHZhciB5Q29vcmRpbmF0ZXMgPSBbMCwgMC4wMDAwNiwgMC4wMDAyNCwgMC4wMDA1NCwgMC4wMDA5NywgMC4wMDE1MywgMC4wMDIyMSwgMC4wMDMwMywgMC4wMDM5OCwgMC4wMDUwNiwgMC4wMDYyOSwgMC4wMDc2NSwgMC4wMDkxNiwgMC4wMTA4MSwgMC4wMTI2LCAwLjAxNDU1LCAwLjAxNjY0LCAwLjAxODg5LCAwLjAyMTMsIDAuMDIzODYsIDAuMDI2NTgsIDAuMDI5NDYsIDAuMDMyNSwgMC4wMzU3MSwgMC4wMzkwOCwgMC4wNDI2MiwgMC4wNDYzMiwgMC4wNTAxOSwgMC4wNTQyMywgMC4wNTg0NCwgMC4wNjI4MywgMC4wNjczOCwgMC4wNzIxLCAwLjA3Njk5LCAwLjA4MjA2LCAwLjA4NzMsIDAuMDkyNywgMC4wOTgyNywgMC4xMDQsIDAuMTA5OSwgMC4xMTU5NywgMC4xMjIxOSwgMC4xMjg1NywgMC4xMzUxLCAwLjE0MTc5LCAwLjE0ODYxLCAwLjE1NTU5LCAwLjE2MjcxLCAwLjE2OTk1LCAwLjE3NzM0LCAwLjE4NDg0LCAwLjE5MjQ3LCAwLjIwMDIxLCAwLjIwODA1LCAwLjIxNiwgMC4yMjQwNSwgMC4yMzIxOSwgMC4yNDA0MSwgMC4yNDg3MSwgMC4yNTcwOCwgMC4yNjU1MiwgMC4yNzQwMSwgMC4yODI1NiwgMC4yOTExNCwgMC4yOTk3OCwgMC4zMDg0NCwgMC4zMTcxMiwgMC4zMjU4MywgMC4zMzQ1NSwgMC4zNDMyOCwgMC4zNTIsIDAuMzYwNzMsIDAuMzY5NDUsIDAuMzc4MTUsIDAuMzg2ODIsIDAuMzk1NDgsIDAuNDA0MTEsIDAuNDEyNjksIDAuNDIxMjYsIDAuNDI5NzcsIDAuNDM4MjQsIDAuNDQ2NjYsIDAuNDU1MDIsIDAuNDYzMzQsIDAuNDcxNiwgMC40Nzk4LCAwLjQ4NzkzLCAwLjQ5NiwgMC41MDM5OSwgMC41MTE5MiwgMC41MTk3OCwgMC41Mjc1NywgMC41MzUyOCwgMC41NDI5MywgMC41NTA0OSwgMC41NTc5NiwgMC41NjUzOCwgMC41NzI3LCAwLjU3OTk2LCAwLjU4NzEzLCAwLjU5NDIxLCAwLjYwMTIyLCAwLjYwODE1LCAwLjYxNSwgMC42MjE3NSwgMC42Mjg0NCwgMC42MzUwNCwgMC42NDE1NywgMC42NDgsIDAuNjU0MzcsIDAuNjYwNjQsIDAuNjY2ODQsIDAuNjcyOTYsIDAuNjc5LCAwLjY4NDk2LCAwLjY5MDg0LCAwLjY5NjY1LCAwLjcwMjM4LCAwLjcwODAzLCAwLjcxMzYsIDAuNzE5MTEsIDAuNzI0NTIsIDAuNzI5ODgsIDAuNzM1MTUsIDAuNzQwMzYsIDAuNzQ1NDksIDAuNzUwNTQsIDAuNzU1NTQsIDAuNzYwNDUsIDAuNzY1MywgMC43NzAwNywgMC43NzQ3OSwgMC43Nzk0MiwgMC43ODQsIDAuNzg4NTEsIDAuNzkyOTUsIDAuNzk3MzMsIDAuODAxNjMsIDAuODA1ODksIDAuODEwMDcsIDAuODE0MTksIDAuODE4MjUsIDAuODIyMjUsIDAuODI2MTksIDAuODMwMDcsIDAuODMzODgsIDAuODM3NjUsIDAuODQxMzUsIDAuODQ1LCAwLjg0ODU4LCAwLjg1MjExLCAwLjg1NTU5LCAwLjg1OTAyLCAwLjg2MjM5LCAwLjg2NTcsIDAuODY4OTUsIDAuODcyMTcsIDAuODc1MzIsIDAuODc4NDIsIDAuODgxNDksIDAuODg0NDgsIDAuODg3NDMsIDAuODkwMzQsIDAuODkzMTksIDAuODk2LCAwLjg5ODc2LCAwLjkwMTQ3LCAwLjkwNDE0LCAwLjkwNjc1LCAwLjkwOTMzLCAwLjkxMTg1LCAwLjkxNDM0LCAwLjkxNjc4LCAwLjkxOTE3LCAwLjkyMTUyLCAwLjkyMzgzLCAwLjkyNjA5LCAwLjkyODMxLCAwLjkzMDQ5LCAwLjkzMjY0LCAwLjkzNDczLCAwLjkzNjgsIDAuOTM4ODEsIDAuOTQwNzksIDAuOTQyNzMsIDAuOTQ0NjMsIDAuOTQ2NSwgMC45NDgzMiwgMC45NTAxMSwgMC45NTE4NiwgMC45NTM1NywgMC45NTUyNSwgMC45NTY4OSwgMC45NTg0OSwgMC45NjAwNiwgMC45NjE2LCAwLjk2MzA5LCAwLjk2NDU1LCAwLjk2NTk5LCAwLjk2NzM4LCAwLjk2ODc0LCAwLjk3MDA3LCAwLjk3MTM2LCAwLjk3MjYzLCAwLjk3Mzg2LCAwLjk3NTA2LCAwLjk3NjIzLCAwLjk3NzM2LCAwLjk3ODQ3LCAwLjk3OTU0LCAwLjk4MDU4LCAwLjk4MTU5LCAwLjk4MjU4LCAwLjk4MzUzLCAwLjk4NDQ1LCAwLjk4NTM1LCAwLjk4NjIxLCAwLjk4NzA1LCAwLjk4Nzg2LCAwLjk4ODY0LCAwLjk4OTM5LCAwLjk5MDExLCAwLjk5MDgxLCAwLjk5MTQ3LCAwLjk5MjEyLCAwLjk5MjczLCAwLjk5MzMyLCAwLjk5Mzg4LCAwLjk5NDQyLCAwLjk5NDkzLCAwLjk5NTQxLCAwLjk5NTg3LCAwLjk5NjMsIDAuOTk2NzEsIDAuOTk3MDksIDAuOTk3NDUsIDAuOTk3NzksIDAuOTk4MSwgMC45OTgzOCwgMC45OTg2NSwgMC45OTg4OCwgMC45OTkxLCAwLjk5OTI5LCAwLjk5OTQ2LCAwLjk5OTYsIDAuOTk5NzIsIDAuOTk5ODIsIDAuOTk5OSwgMC45OTk5NiwgMC45OTk5OSwgMV07XG4gICAgICAgIHZhciBsZW4gPSB5Q29vcmRpbmF0ZXMubGVuZ3RoIC0gMTtcblxuICAgICAgICAvLyBSZXR1cm4gdGhlIGVhc2VpbmcgZnVuY3Rpb24sIHdoaWNoIHJldHVybnMgYW4gZWFzZWQgdmFsdWUgKDDigJMxKSBiYXNlZCBvbiB0aGUgcHJvZ3Jlc3MgKDDigJMxLCBpLmUgMCUtMTAwJSlcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICAgICAgICB2YXIgcCA9IE1hdGgucm91bmQocHJvZ3Jlc3MgKiBsZW4pO1xuICAgICAgICAgICAgcmV0dXJuIHlDb29yZGluYXRlc1twXTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLypcbiAgICAgKiBGdW5jOiBnZXROYXR1cmFsSGVpZ2h0XG4gICAgICogRGVzYzogR2V0IHRoZSBoZWlnaHQgb2YgYW4gZWxlbWVudCBvbiB0aGUgcGFnZSAoYmVmb3JlIHZpc2libHkgcmVuZGVyaW5nIGl0IG9uIHRoZSBwYWdlKVxuICAgICAqIEFyZ3M6IEBlbCAtIEhUTUwgRWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIG1lYXN1cmVcbiAgICAgKiAgICAgICBAY2xhc3NOYW1lIC0gU3RyaW5nIC0gQ2xhc3MgdGhhdCB0ZW1wb3Jhcnkgd3JhcHBlciBlbGVtZW50IHNob3VsZCBoYXZlICh0byBhbGxvdyBmb3IgY29ycmVjdCBzdHlsaW5nIGFuZCBjb3JyZWN0IGhlaWdodCB0ZXN0aW5nKVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE5hdHVyYWxIZWlnaHQoZWwsIGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgd3JhcHBlciwgdGVzdERpdiwgaGVpZ2h0O1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XG5cbiAgICAgICAgd3JhcHBlciA9IHdyYXBJbm5lcihlbCwgXCJkaXZcIik7XG4gICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgICBoZWlnaHQgPSB3cmFwcGVyLm9mZnNldEhlaWdodDtcblxuICAgICAgICB1bndyYXAod3JhcHBlcik7XG5cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9XG5cblxuXG5cbiAgICAvKlxuICAgICAqIEZ1bmM6IHdyYXBJbm5lclxuICAgICAqIERlc2M6IFdyYXAgdGhlIGNvbnRlbnRzIG9mIGFuIGVsZW1lbnQgaW4gYSBuZXcgSFRNTCBlbGVtZW50XG4gICAgICogQXJnczogQGVsIC0gSFRNTEVsZW1lbnQgLSBUaGUgZWxlbWVudCB3aG9zZSBjb250ZW50cyBzaG91bGQgYmUgd3JhcHBlZFxuICAgICAqICAgICAgIEB3cmFwcGVyIC0gU3RyaW5nIC0gVGhlIHR5cGUgb2YgSFRNTCBlbGVtZW50IHRoYXQgc2hvdWxkIHdyYXAgdGhlIGNvbnRlbnRzXG4gICAgICovXG4gICAgZnVuY3Rpb24gd3JhcElubmVyKGVsLCB3cmFwcGVyKSB7XG4gICAgICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh3cmFwcGVyKTtcblxuICAgICAgICAvLyBBcHBlbmQgYSB3cmFwcGVyIG5vZGVcbiAgICAgICAgZWwuYXBwZW5kQ2hpbGQod3JhcCk7XG5cbiAgICAgICAgLy8gTW92ZSBhbGwgY2hpbGRyZW4gaW50byB0aGUgd3JhcHBlciBlbGVtZW50XG4gICAgICAgIHdoaWxlIChlbC5maXJzdENoaWxkICYmIGVsLmZpcnN0Q2hpbGQgIT09IHdyYXApIHdyYXAuYXBwZW5kQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG5cbiAgICAgICAgcmV0dXJuIHdyYXA7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBGdW5jOiB1bndyYXBcbiAgICAgKiBEZXNjOiBVbndyYXAgdGhlIHBhcmVudCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgRE9NIGVsZW1lbnRcbiAgICAgKiBTcmM6ICBodHRwczovL3BsYWluanMuY29tL2phdmFzY3JpcHQvbWFuaXB1bGF0aW9uL3Vud3JhcC1hLWRvbS1lbGVtZW50LTM1L1xuICAgICAqIEFyZ3M6IEBlbCAtIEhUTUxFbGVtZW50IC0gVGhlIGVsZW1lbnQgdG8gZGVzdHJveVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVud3JhcChlbCkge1xuICAgICAgICAvLyBnZXQgdGhlIGVsZW1lbnQncyBwYXJlbnQgbm9kZVxuICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcblxuICAgICAgICAvLyBtb3ZlIGFsbCBjaGlsZHJlbiBvdXQgb2YgdGhlIHdyYXBwZXIgZWxlbWVudFxuICAgICAgICB3aGlsZSAoZWwuZmlyc3RDaGlsZCkgcGFyZW50Lmluc2VydEJlZm9yZShlbC5maXJzdENoaWxkLCBlbCk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBlbXB0eSBlbGVtZW50XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChlbCk7XG4gICAgfVxuXG5cblxuICAgIHJldHVybiB7XG4gICAgICAgIGFuaW1hdGVIZWlnaHQ6IGFuaW1hdGVIZWlnaHQsXG4gICAgICAgIGdldE5hdHVyYWxIZWlnaHQ6IGdldE5hdHVyYWxIZWlnaHRcbiAgICB9XG5cblxufSkoKTsiLCIvKlxuICogTW9kdWxlOiBCWVUgTWFpblxuICogRGVzYzogICBGdW5jdGlvbnMgdGhhdCBhcHBseSB0byBhbGwgQllVIHBhZ2VzLCBjb21wb25lbnRzLCBvciBzY3JpcHRzXG4gKi9cblxudmFyIGJ5dV9tYWluID0gKGZ1bmN0aW9uKCl7XG5cblx0dmFyIGRvYyA9IGRvY3VtZW50O1xuXG5cdC8qXG5cdCAqIEhUTUwgUHJvdG90eXBlIGZ1bmN0aW9uIGFzc2lnbm1lbnRzXG5cdCAqIERlc2M6IE1ha2UgaXQgZWFzeSB0byBhZGQsIHRlc3QsIGFuZCByZW1vdmUgSFRNTCBjbGFzc2VzIHZpYSBjb21wYXRpYmxlLCBwbGFpbiBKU1xuXHQgKiBTcmM6ICBodHRwczovL2Nzcy10cmlja3MuY29tL3NuaXBwZXRzL2phdmFzY3JpcHQvYWRkY2xhc3MtZnVuY3Rpb24vI2NvbW1lbnQtMTYxODQwNVxuXHQgKi9cblx0XG5cdC8vIEhhc0NsYXNzXG5cdEhUTUxFbGVtZW50LnByb3RvdHlwZS5oYXNDbGFzcyA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZS5tYXRjaChuZXcgUmVnRXhwKCcoXFxcXHN8XiknK25hbWUrJyhcXFxcc3wkKScpKTtcblx0fTtcblxuXHQvLyBBZGRDbGFzc1xuXHRIVE1MRWxlbWVudC5wcm90b3R5cGUuYWRkQ2xhc3MgPSBmdW5jdGlvbihuZXdfY2xhc3MpIHsgICBcblx0ICAgIHZhciBuYyA9IG5ld19jbGFzcy5zcGxpdChcIixcIik7XG5cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBpZiAoKFwiIFwiICsgdGhpcy5jbGFzc05hbWUgKyBcIiBcIikuaW5kZXhPZihcIiBcIiArIG5jW2ldICsgXCIgXCIpID09IC0xKSB7XG5cdCAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lICs9IFwiIFwiICsgbmNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdH07XG5cblx0Ly8gUmVtb3ZlQ2xhc3Ncblx0SFRNTEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24obmFtZSkge1xuXHQgIGlmICh0aGlzLmhhc0NsYXNzKG5hbWUpKSB7XG5cdCAgICB2YXIgc2VhcmNoID0gbmV3IFJlZ0V4cCgnKFxcXFxzfF4pJytuYW1lKycoXFxcXHN8JCknKTsgLy8gUmVnRXggdG8gaWRlbnRpZnkgbWF0Y2hcblx0ICAgIHZhciByZXBsYWNlID0gbmV3IFJlZ0V4cCgnKFxcXFxzfF4pJytuYW1lKTsgLy8gUmVnRXggdG8gcmVwbGFjZSBpZiBtYXRjaGVkXG5cdCAgICBpZiAoIHRoaXMuY2xhc3NOYW1lLnNlYXJjaChzZWFyY2gpICkge1xuXHQgICAgXHR0aGlzLmNsYXNzTmFtZSA9IHRoaXMuY2xhc3NOYW1lLnJlcGxhY2UocmVwbGFjZSwnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzO1xuXHR9O1xuXG5cblxuXG5cblx0Lypcblx0ICogRnVuYzogZXhlY3V0ZU9uTG9hZFxuXHQgKiBEZXNjOiBFeGVjdXRlIHNwZWNpZmllZCBmdW5jdGlvbiB3aGVuIHRoZSBET00gaXMgcmVhZHkuIEhhbmRsZSBcblx0ICogQXJnczogQGZ1bmN0aW9uTmFtZSAtIEZ1bmN0aW9uIElkZW50aWZpZXIgLSBOYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBleGVjdXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBleGVjdXRlT25Mb2FkKCBmdW5jdGlvbk5hbWUgKSB7XG5cblx0XHQvLyBpbiBjYXNlIHRoZSBkb2N1bWVudCBpcyBhbHJlYWR5IHJlbmRlcmVkXG5cdFx0aWYgKGRvYy5yZWFkeVN0YXRlIT0nbG9hZGluZycpIGZ1bmN0aW9uTmFtZSgpO1xuXG5cdFx0Ly8gbW9kZXJuIGJyb3dzZXJzXG5cdFx0ZWxzZSBpZiAoZG9jLmFkZEV2ZW50TGlzdGVuZXIpIGRvYy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb25OYW1lKTtcblxuXHRcdC8vIElFIDw9IDhcblx0XHRlbHNlIGRvYy5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24oKXtcblx0XHQgICAgaWYgKGRvYy5yZWFkeVN0YXRlPT0nY29tcGxldGUnKSBmdW5jdGlvbk5hbWUoKTtcblx0XHR9KTtcblxuXHR9IC8vIGV4ZWN1dGVPbkxvYWRcblxuXG5cblxuXHQvKlxuXHQgKiBGdW5jOiBlbEV4aXN0c1xuXHQgKiBEZXNjOiBDaGVjayB3aGV0aGVyIGFuIGVsZW1lbnQgYXBwZWFycyBpbiB0aGUgRE9NXG5cdCAqIEFyZ3M6IEBjbGFzc05hbWUgLSBTdHJpbmcgLSBOYW1lIG9mIHRoZSBjbGFzcyBvbiB0aGUgZWxlbWVudCB0byBzZWFyY2ggZm9yXG5cdCAqIFx0XHQgQGNvbnRhaW5lciAtIEhUTUwgRWxlbWVudCAtIENvbnRleHQgZm9yIGZpbmRpbmcgdGhlIGVsZW1lbnQgKGNvdWxkIGJlIGRvY3VtZW50KVxuXHQgKi9cblx0ZnVuY3Rpb24gZWxFeGlzdHMoIGNsYXNzTmFtZSwgY29udGFpbmVyICkge1xuXG5cdFx0cmV0dXJuIGNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKS5sZW5ndGggPiAwO1xuXG5cdH0gLy8gZWxFeGlzdHNcblxuXG5cblxuXHQvKlxuXHQgKiBGdW5jOiBoYXNDaGlsZHJlblxuXHQgKiBEZXNjOiBDaGVjayB3aGV0aGVyIGFuIGVsZW1lbnQgaGFzIGNoaWxkcmVuXG5cdCAqIEFyZ3M6IEBjbGFzc05hbWUgLSBTdHJpbmcgLSBOYW1lIG9mIHRoZSBlbGVtZW50J3MgY2xhc3Ncblx0ICogXHRcdCBAY29udGFpbmVyIC0gSFRNTCBFbGVtZW50IC0gQ29udGV4dCBmb3IgZmluZGluZyB0aGUgZWxlbWVudCAoY291bGQgYmUgZG9jdW1lbnQpXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNDaGlsZHJlbiggY2xhc3NOYW1lLCBjb250YWluZXIgKSB7XG5cblx0XHR2YXIgaGFzQ2hpbGRyZW4gPSBmYWxzZTtcblx0XHR2YXIgZWxzO1xuXG5cdFx0aWYgKCBlbEV4aXN0cyggY2xhc3NOYW1lLCBjb250YWluZXIgKSApIHtcblx0XHRcdGVscyA9IGNvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKTtcblxuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbHMsIGZ1bmN0aW9uKGVsKSB7XG5cdFx0XHRcdGlmIChlbC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0aGFzQ2hpbGRyZW4gPSB0cnVlO1xuXHRcdFx0XHR9IFxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhc0NoaWxkcmVuO1xuXG5cdH0gLy8gaGFzQ2hpbGRyZW5cblxuXG5cblxuXHQvLyBFeHBvc2UgcHVibGljIG1ldGhvZHNcblx0cmV0dXJuIHtcblx0XHRleGVjdXRlT25Mb2FkOiBleGVjdXRlT25Mb2FkLFxuXHRcdGVsRXhpc3RzOiBlbEV4aXN0cyxcblx0XHRoYXNDaGlsZHJlbjogaGFzQ2hpbGRyZW4sXG5cdH1cblxufSkoKTsiLCJ2YXIgYnl1X2hlYWRlciA9IChmdW5jdGlvbigpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGRvYyA9IGRvY3VtZW50OyAvLyBQdXQgdGhpcyBpbiBhIHZhcmlhYmxlIHRvIGVuYWJsZSBzbWFsbGVyIGNvbXByZXNzaW9uXG5cdHZhciBtZW51T3BlbkR1cmF0aW9uID0gMzAwO1xuXHR2YXIgbWFpbkVsO1xuXG5cdC8vIEZvciBjb21wcmVzc2lvbjogaWYgYSBzdHJpbmcgaXMgdXNlZCBtb3JlIHRoYW4gb25jZSwgcHV0IGl0IGluIGEgdmFyaWFibGVcblx0dmFyIGpzSW5pdENsYXNzID0gJ2pzLWVuYWJsZWQnO1xuXHR2YXIgZXhwYW5kZWRBdHRyID0gJ2FyaWEtZXhwYW5kZWQnO1xuXHR2YXIgbWVudU9wZW5DbGFzcyA9ICdtZW51LW9wZW4nO1xuXHR2YXIgc2l0ZU5hdkNsYXNzID0gJ2J5dS1zaXRlLW5hdmlnYXRpb24nO1xuXHR2YXIgc2l0ZUFjdGlvbkNsYXNzID0gJ2J5dS1hY3Rpb24taWQtc2VhcmNoJztcblxuXG5cblxuXHQvLyBFeGVjdXRlIHRoZSBpbml0aWFsaXplIGZ1bmN0aW9uXG5cdGJ5dV9tYWluLmV4ZWN1dGVPbkxvYWQoIGluaXQgKTtcblxuXG5cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IGluaXRcblx0ICogRGVzYzogSW5pdGlhbGl6ZSB0aGUgaGVhZGVyIGJ1dHRvbiBmb3IgYWxsIEJZVSBoZWFkZXJzIG9uIHBhZ2Vcblx0ICogXHRcdCAoaGFuZGxlcyBtdWx0aXBsZSBoZWRlcnMgKVxuXHQgKiBBcmdzOiBub25lXG5cdCAqL1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXG5cdFx0dmFyIGhlYWRlckVscyA9IGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdieXUtaGVhZGVyJyk7XG5cdFx0bWFpbkVsID0gZG9jLmdldEVsZW1lbnRCeUlkKFwiYnl1LW1haW5cIik7XG5cblx0XHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGhlYWRlckVscywgZnVuY3Rpb24oZWwpIHtcblx0XHRcdGVuYWJsZU1vYmlsZU1lbnUoIGVsICk7XG5cdFx0fSk7XG5cblx0fSAvLyBpbml0XG5cblxuXG5cblx0Lypcblx0ICogRnVuYzogZW5hYmxlTW9iaWxlTWVudVxuXHQgKiBEZXNjOiBJbml0aWFsaXplIHRoZSBoZWFkZXIgYnV0dG9uXG5cdCAqIEFyZ3M6IEBoZWFkZXJFbCAtIEhUTUwgRWxlbWVudCAtIFRoZSBoZWFkZXIgdGhhdCBjb250YWlucyB0aGUgbW9iaWxlIG1lbnUgdG8gZW5hYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBlbmFibGVNb2JpbGVNZW51KCBoZWFkZXJFbCApIHtcblxuXHRcdGhlYWRlckVsLmhhc05hdiA9IGJ5dV9tYWluLmVsRXhpc3RzKHNpdGVOYXZDbGFzcywgaGVhZGVyRWwpO1xuXHRcdGhlYWRlckVsLmhhc0FjdGlvbnMgPSBieXVfbWFpbi5oYXNDaGlsZHJlbihzaXRlQWN0aW9uQ2xhc3MsIGhlYWRlckVsKTtcblxuXHRcdHZhciBzaG93TWVudUJ1dHRvbiA9IGhlYWRlckVsLmhhc05hdiB8fCBoZWFkZXJFbC5oYXNBY3Rpb25zO1xuXG5cdFx0aWYgKCBzaG93TWVudUJ1dHRvbiApIHtcblx0XHRcdGhlYWRlckVsLmFkZENsYXNzKGpzSW5pdENsYXNzKTtcblx0XHRcdGluaXRNZW51QnV0dG9uKCBoZWFkZXJFbCApO1xuXG5cdFx0XHRoZWFkZXJFbC5uYXZFbCA9IGhlYWRlckVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIHNpdGVOYXZDbGFzcyApWzBdO1xuXHRcdFx0aGVhZGVyRWwuYWN0aW9uc0VsID0gaGVhZGVyRWwuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggc2l0ZUFjdGlvbkNsYXNzIClbMF07XG5cdFx0fVxuXG5cdH0gLy8gZW5hYmxlTW9iaWxlTWVudVxuXG5cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IGluaXRNZW51QnV0dG9uXG5cdCAqIERlc2M6IFxuXHQgKiBBcmdzOiBAaGVhZGVyRWwgLSBIVE1MIEVsZW1lbnQgLSBUaGUgaGVhZGVyIGVsZW1lbnQgdGhhdCBjb250YWlucyB0aGUgbWVudSBidXR0b24gdG8gZW5hYmxlXG5cdCAqL1xuXHRmdW5jdGlvbiBpbml0TWVudUJ1dHRvbiggaGVhZGVyRWwgKSB7XG5cdFx0dmFyIG1lbnVCdXR0b24gPSBoZWFkZXJFbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdieXUtbWVudS1idXR0b24nKVswXTtcblxuXHRcdG1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKXtcblx0XHRcdGNsaWNrTWVudUJ1dHRvbiggZS50YXJnZXQsIGhlYWRlckVsICk7XG5cdFx0fSk7XG5cdH0gLy8gaW5pdE1lbnVCdXR0b25cblxuXG5cblxuXHQvKlxuXHQgKiBGdW5jOiBjbGlja01lbnVCdXR0b25cblx0ICogRGVzYzogSGFuZGxlIGNsaWNrIGV2ZW50cyBvbiBhIG1vYmlsZSBtZW51IGJ1dHRvbiB3aXRoaW4gYSBoZWFkZXJcblx0ICogQXJnczogQGJ0biAtIEhUTUwgRWxlbWVudCAtIFRoZSBidXR0b24gZWxlbWVudCB0aGF0IGhhcyBiZWVuIGNsaWNrZWRcblx0ICpcdFx0IEBoZWFkZXJFbCAtIEhUTUwgRWxlbWVudCAtIFRoZSBoZWFkZXIgZWxlbWVudCB3aG9zZSBtZW51IGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkXG5cdCAqL1xuXHRmdW5jdGlvbiBjbGlja01lbnVCdXR0b24oIGJ0biwgaGVhZGVyRWwgKSB7XG5cdFx0dmFyIG9wZW4gPSBidG4uZ2V0QXR0cmlidXRlKGV4cGFuZGVkQXR0cikgIT0gJ2ZhbHNlJztcblx0XHRcblx0XHQvLyBPcGVuXG5cdFx0aWYgKCAhb3BlbiApIHtcblx0XHRcdG9wZW5NZW51KCBidG4sIGhlYWRlckVsICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvc2Vcblx0XHRlbHNlIHtcblx0XHRcdGNsb3NlTWVudSggYnRuLCBoZWFkZXJFbCApO1xuXHRcdH1cblx0fSAvLyBjbGlja01lbnVCdXR0b25cblxuXG5cblxuXHQvKlxuXHQgKiBGdW5jOiBvcGVuTWVudVxuXHQgKiBEZXNjOiBPcGVuIGEgbW9iaWxlIG1lbnUgd2l0aGluIGEgaGVhZGVyXG5cdCAqIEFyZ3M6IEBidG4gLSBIVE1MIEVsZW1lbnQgLSBUaGUgYnV0dG9uIGVsZW1lbnQgdGhhdCBjb250cm9scyB0aGUgbWVudSB3aGljaCBzaG91bGQgYmUgb3BlbmVkXG5cdCAqXHRcdCBAaGVhZGVyRWwgLSBIVE1MIEVsZW1lbnQgLSBUaGUgaGVhZGVyIGVsZW1lbnQgd2hvc2UgbWVudSBzaG91bGQgYmUgb3BlbmVkXG5cdCAqL1xuXHRmdW5jdGlvbiBvcGVuTWVudSggYnRuLCBoZWFkZXJFbCApIHtcblxuXHRcdHZhciBoZWFkZXJIZWlnaHQgPSBoZWFkZXJFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgfHwgaGVhZGVyRWwub2Zmc2V0SGVpZ2h0O1xuXG5cdFx0Ly8gU2V0IHRoZSBvcGVuL2Nsb3NlZCBhdHRyaWJ1dGUgb24gdGhlIGJ1dHRvblxuXHRcdGJ0bi5zZXRBdHRyaWJ1dGUoZXhwYW5kZWRBdHRyLCB0cnVlKTtcblxuXHRcdC8vIFNldCB0aGUgb3Blbi9jbG9zZWQgYXR0cmlidXRlIG9uIHRoZSBoZWFkZXJcblx0XHRpZiAoICFoZWFkZXJFbC5oYXNDbGFzcyggbWVudU9wZW5DbGFzcyApICkge1xuXHRcdFx0aGVhZGVyRWwuYWRkQ2xhc3MoIG1lbnVPcGVuQ2xhc3MgKTtcblx0XHRcdG1haW5FbC5zdHlsZS50b3AgPSBoZWFkZXJIZWlnaHQgKyBcInB4XCI7XG5cdFx0fVxuXG5cdH0gLy8gb3Blbk1lbnVcblxuXG5cblx0Lypcblx0ICogRnVuYzogY2xvc2VNZW51XG5cdCAqIERlc2M6IENsb3NlIGEgbW9iaWxlIG1lbnUgd2l0aGluIGEgaGVhZGVyXG5cdCAqIEFyZ3M6IEBidG4gLSBIVE1MIEVsZW1lbnQgLSBUaGUgYnV0dG9uIGVsZW1lbnQgdGhhdCBjb250cm9scyB0aGUgbWVudSB3aGljaCBzaG91bGQgYmUgY2xvc2VkXG5cdCAqXHRcdCBAaGVhZGVyRWwgLSBIVE1MIEVsZW1lbnQgLSBUaGUgaGVhZGVyIGVsZW1lbnQgd2hvc2UgbWVudSBzaG91bGQgYmUgY2xvc2VkXG5cdCAqL1xuXHRmdW5jdGlvbiBjbG9zZU1lbnUoIGJ0biwgaGVhZGVyRWwgKSB7XG5cblx0XHQvLyBTZXQgdGhlIG9wZW4vY2xvc2VkIGF0dHJpYnV0ZSBvbiB0aGUgYnV0dG9uXG5cdFx0YnRuLnNldEF0dHJpYnV0ZShleHBhbmRlZEF0dHIsIGZhbHNlKTtcblxuXHRcdC8vIFNldCB0aGUgb3Blbi9jbG9zZWQgYXR0cmlidXRlIG9uIHRoZSBoZWFkZXJcblx0XHRoZWFkZXJFbC5yZW1vdmVDbGFzcyggbWVudU9wZW5DbGFzcyApO1xuXHRcdG1haW5FbC5zdHlsZS50b3AgPSBcIlwiO1x0XHRcblxuXG5cdH0gLy8gY2xvc2VNZW51XG5cblxufSkoKTsiLCIvKlxuICogTW9kdWxlOiBCWVUgVGFibGVcbiAqIERlc2M6ICAgSGFuZGxlIHRhYmxlcyB0aGF0IGFyZSB3aWRlciB0aGFuIHRoaWVyIGNvbnRhaW5lclxuICovXG5cbnZhciBieXVfdGFibGUgPSAoZnVuY3Rpb24oKXtcblxuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIGRvYyA9IGRvY3VtZW50O1xuXG5cblx0Ly8gRXhlY3V0ZSB0aGUgZnVuY3Rpb25cblx0Ynl1X21haW4uZXhlY3V0ZU9uTG9hZCggdXBkYXRlVGFibGVzICk7XG5cdFxuXG5cdC8qXG5cdCAqIEZ1bmM6IFVwZGF0ZVRhYmxlc1xuXHQgKiBEZXNjOiBEZXRlY3QgYW5kIGhhbmRsZSB0YWJsZXMgdGhhdCBhcmUgd2lkZXIgdGhhbiB0aGVpciBjb250YWluZXIuXG5cdCAqIFx0XHQgV29ya3Mgb24gdGFibGVzIGNvbnRhaW5lZCB3aXRoaW4gYW4gZWxlbWVudCBvZiBjbGFzcyBcInRhYmxlLWNvbnRhaW5lclwiLlxuXHQgKiBBcmdzOiBub25lXG5cdCAqL1xuXHRmdW5jdGlvbiB1cGRhdGVUYWJsZXMoKSB7XG5cdFx0dmFyIGNvbnRhaW5lcnMgPSBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYmxlLWNvbnRhaW5lclwiKTtcblxuXHRcdGZvciAodmFyIGk9MDsgaSA8IGNvbnRhaW5lcnMubGVuZ3RoOyBpKyspIHtcblx0XHQgICAgdmFyIGNvbnRhaW5lciA9IGNvbnRhaW5lcnNbaV07XG5cdFx0ICAgIHVwZGF0ZVRhYmxlKCBjb250YWluZXIgKTtcblx0XHR9XG5cdH1cblxuXG5cdC8qXG5cdCAqIEZ1bmM6IFVwZGF0ZVRhYmxlXG5cdCAqIERlc2M6IENoZWNrIGlmIGEgdGFibGUgaXMgd2lkZXIgdGhhbiBpdHMgY29udGFpbmVyLCBhbmQgbWFyayBzY3JvbGxpbmcgcG9zaXRpb24gd2l0aGluIGl0XG5cdCAqIEFyZ3M6IEBjb250YWluZXIgLSBIVE1MIEVsZW1lbnQgLSBBIGNvbnRhaW5lciBlbGVtZW50IGZvciBhIHRhYmxlIChwcm9iYWJseSBvZiBjbGFzcyBcInRhYmxlLWNvbnRhaW5lclwiKVxuXHQgKi9cblx0ZnVuY3Rpb24gdXBkYXRlVGFibGUoIGNvbnRhaW5lciApIHtcblx0XHR2YXIgY193aWR0aCA9IGNvbnRhaW5lci5vZmZzZXRXaWR0aDtcblx0ICAgIHZhciB0YWJsZSA9IGNvbnRhaW5lci4gZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0YWJsZVwiKVswXTtcblx0ICAgIHZhciB0X3dpZHRoID0gdGFibGUub2Zmc2V0V2lkdGg7XG5cdCAgICB2YXIgdGFibGVfd2lkZV9jbGFzcyA9IFwidGFibGUtd2lkZVwiO1xuXHQgICAgdmFyIHN0YXJ0X3Zpc2libGVfY2xhc3MgPSBcInN0YXJ0LXZpc2libGVcIjtcblx0ICAgIHZhciBlbmRfdmlzaWJsZV9jbGFzcyA9IFwiZW5kLXZpc2libGVcIjtcblxuXHQgICAgaWYgKCBjX3dpZHRoIDwgdF93aWR0aCApIHtcblxuXHQgICAgXHQvLyBBZGQgdGFibGUgd2lkZSBjbGFzcyBpZiBpdCdzIG5vdCBhbHJlYWR5IHRoZXJlXG5cdCAgICBcdGlmICggIWNvbnRhaW5lci5oYXNDbGFzcyggdGFibGVfd2lkZV9jbGFzcyApICkgeyBcblx0XHQgICAgXHRjb250YWluZXIuYWRkQ2xhc3MoIHRhYmxlX3dpZGVfY2xhc3MgKTtcblx0XHQgICAgfVxuXG5cdCAgICBcdC8vIENoZWNrIGlmIHRoZSBzdGFydCBvZiB0aGUgdGFibGUgaXMgdmlzaWJsZSBhbmQgaGFuZGxlXG5cdCAgICBcdGlmICggdGFibGUuc2Nyb2xsTGVmdCA9PSAwICkge1xuXHQgICAgXHRcdGlmICggIWNvbnRhaW5lci5oYXNDbGFzcyggc3RhcnRfdmlzaWJsZV9jbGFzcyApICkge1xuXHRcdCAgICBcdFx0Y29udGFpbmVyLmFkZENsYXNzKCBzdGFydF92aXNpYmxlX2NsYXNzICk7XG5cdCAgICBcdFx0fVxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcyggc3RhcnRfdmlzaWJsZV9jbGFzcyApO1xuXHQgICAgXHR9XG5cblx0ICAgIFx0Ly8gQ2hlY2sgaWYgdGhlIGVuZCBvZiB0aGUgdGFibGUgaXMgdmlzaWJsZSBhbmQgaGFuZGxlXG5cdCAgICBcdGlmICggdF93aWR0aCAtIHRhYmxlLnNjcm9sbExlZnQgPT0gY193aWR0aCApIHtcblx0ICAgIFx0XHRpZiAoICFjb250YWluZXIuaGFzQ2xhc3MoIGVuZF92aXNpYmxlX2NsYXNzICkgKSB7XG5cdFx0ICAgIFx0XHRjb250YWluZXIuYWRkQ2xhc3MoIGVuZF92aXNpYmxlX2NsYXNzICk7XG5cdCAgICBcdFx0fVxuXHQgICAgXHR9IGVsc2Uge1xuXHQgICAgXHRcdGNvbnRhaW5lci5yZW1vdmVDbGFzcyggZW5kX3Zpc2libGVfY2xhc3MgKTtcblx0ICAgIFx0fVxuXHQgICAgfSBcblxuXHQgICAgLy8gVGhlIHRhYmxlIGlzIG5vdCB0b28gd2lkZSBmb3IgaXRzIGNvbnRhaW5lclxuXHQgICAgZWxzZSB7XG5cdCAgICBcdGNvbnRhaW5lci5yZW1vdmVDbGFzcyggdGFibGVfd2lkZV9jbGFzcyApO1xuXHQgICAgfVxuXHR9XG5cbn0pKCk7Il19
